\usepackage{xargs} % \newcommandx
\usepackage{xspace} % \xspace
\usepackage{crossreftools} % \crtcrossreflabel
\usepackage{nameref} % \nameref

% Shorthands
\newcommand           \Cal          [1] {\symcal #1}
\newcommand           \BB           [1] {\symbb #1}
\newcommand           \Bold         [1] {\operatorname{\symbf{#1}}}
\newcommand           \Cat          [1] {\Bold{#1}}
\newcommand           \Ol           [1] {\overline{#1}}
\newcommand           \MultTo           {\rightrightarrows}
\newcommand           \Derives          {\overset * \implies}
\newcommand           \Co               {\operatorname{co}\!}

% Special rings
\newcommand           \N                {\BB N}
\newcommand           \Z                {\BB Z}
\newcommand           \Q                {\BB Q}
\newcommand           \R                {\BB R}
\renewcommand         \C                {\BB C}
\renewcommand         \k                {\BB k}
\newcommand           \K                {\BB K}
\newcommand           \F                {\BB F}

% Operations
\newcommand           \Abs          [1] {\left\vert #1 \right\vert}
\newcommand           \Norm         [1] {\left\Vert #1 \right\Vert}
\newcommand           \Gen          [1] {\left\langle #1 \right\rangle}
\newcommand           \Prod         [2] {\left\langle #1, #2 \right\rangle}

% Operators
\DeclareMathOperator  \B                {B}
\DeclareMathOperator  \Card             {card}
\DeclareMathOperator  \Ceil             {ceil}
\DeclareMathOperator  \Cl               {cl}
\DeclareMathOperator  \Char             {char}
\DeclareMathOperator  \Conv             {conv}
\DeclareMathOperator  \Diam             {diam}
\DeclareMathOperator  \Dist             {dist}
\DeclareMathOperator  \Dom              {dom}
\DeclareMathOperator  \End              {end}
\DeclareMathOperator  \Epi              {epi}
\DeclareMathOperator  \FI               {FI}
\DeclareMathOperator  \Floor            {floor}
\DeclareMathOperator  \Gph              {gph}
\DeclareMathOperator  \Hom              {hom}
\DeclareMathOperator  \Hypo             {hypo}
\DeclareMathOperator  \Id               {id}
\DeclareMathOperator  \Img              {im}
\DeclareMathOperator  \Ind              {I}
\DeclareMathOperator  \Int              {int}
\DeclareMathOperator  \LC               {LC}
\DeclareMathOperator  \Len              {len}
\DeclareMathOperator  \Ord              {ord}
\DeclareMathOperator  \Power            {\Cal P}
\DeclareMathOperator  \Range            {range}
\DeclareMathOperator  \Rank             {rank}
\DeclareMathOperator  \Rem              {rem}
\DeclareMathOperator  \Sign             {sign}
\DeclareMathOperator  \Span             {span}
\DeclareMathOperator  \Quot             {quot}

\AtBeginDocument{
  % https://github.com/wspr/unicode-math/issues/457
  \let\Re\undefined
  \let\Im\undefined
  \DeclareMathOperator  \Re               {Re}
  \DeclareMathOperator  \Im               {Im}
}

% Groups
\DeclareMathOperator  \Aut              {aut}
\DeclareMathOperator  \Gal              {gal}
\DeclareMathOperator  \GL               {GL}
\DeclareMathOperator  \Orth             {O}
\DeclareMathOperator  \SL               {SL}
\DeclareMathOperator  \Unitary          {U}

% Index
\newcommand \IndexEntry [2] {\index{#2}\textsuperscript{\hyperref[sec:index]{#1}}\xspace}
\newcommand \AOC {\IndexEntry{AOC}{Axiom of choice}}
\newcommand \LEM {\IndexEntry{LEM}{Law of the excluded middle}}
\newcommand \USC {\IndexEntry{USC}{Compactness of the unit sphere}}

% Items
\newcommand           \RItem        [1] {\item[{\ref{#1}}]}
\newcommandx          \DItem        [2][2=] {%
  \ifthenelse{\equal{#2}{}}%
    {\item\label{#1}}%
    {\item[{\crtcrossreflabel{#2}[#1]}]}%
}

\newcommand           \ImpItem      [3] {\item[(%
  \ifthenelse{\equal{#1}{}}%
    {}%
    {\ref{#1}}%
  #3%
  \ifthenelse{\equal{#2}{}}
    {}%
    {\ref{#2}}%
)]}%

\newcommandx          \Implies      [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\implies \)}}
\newcommandx          \ImpliedBy    [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\impliedby \)}}
\newcommandx          \Iff          [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\iff \)}}

% Misc
\newcommand           \Email        [1] {\href{mailto:#1}{#1}}
\newcommand           \URL          [1] {\href{#1}{#1}}
\newcommand           \Tinyref      [1] {\textsuperscript{\ref{#1}}}
\newcommand           \fullref      [1] {\cref{#1} (\nameref*{#1})}
\newcommand           \Fullref      [1] {\Cref{#1} (\nameref*{#1})}
\newcommand           \Def          [1] {\textbf{#1}}

% https://tex.stackexchange.com/questions/156049/how-can-i-get-cleveref-enumitem-to-print-not-item-e-but-proposition-1
\newcommand \ListStructure [2] {
  \newlist{#1}{enumerate}{1}
  \setlist[#1]{label=\alph*), ref=\theproposition~(\alph*)}
  \crefalias{#1i}{#2}
}

\ListStructure {defenum} {definition}
\ListStructure {thmenum} {theorem}
\ListStructure {algenum} {algorithm}
\ListStructure {exenum}  {example}
