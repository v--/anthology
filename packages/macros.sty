% I start my own macros with capital letters so that it is known that they are custom.
% There may be an exception or two.

\usepackage{xargs} % \newcommandx
\usepackage{xspace} % \xspace
\usepackage{crossreftools} % \crtcrossreflabel
\usepackage{nameref} % \nameref
\usepackage{refcount} % getrefbykeydefault

% Shorthands
\newcommand           \Cal          [1] {\symcal #1}
\newcommand           \BB           [1] {\symbb #1}
\newcommand           \Bold         [1] {\operatorname{\symbf{#1}}}
\newcommand           \Cat          [1] {\Bold{#1}}
\newcommand           \Op           [1] {\operatorname{#1}}
\newcommand           \Ol           [1] {\overline{#1}}
\newcommand           \Ul           [1] {\underline{#1}}
\newcommand           \MultTo           {\rightrightarrows}
\newcommand           \Derives          {\overset * \implies}
\newcommand           \Co               {\operatorname{co}\!}
\renewcommand         \Vec          [1] {\overrightarrow{#1}}

% Blackboard letters
\newcommand           \BN                {\BB N}
\newcommand           \BZ                {\BB Z}
\newcommand           \BQ                {\BB Q}
\newcommand           \BR                {\BB R}
\newcommand           \BC                {\BB C}
\newcommand           \Bk                {\BB k}
\newcommand           \BK                {\BB K}
\newcommand           \BF                {\BB F}

% Calligraphic letters
\DeclareMathOperator  \CA               {\Cal A}
\DeclareMathOperator  \CB               {\Cal B}
\DeclareMathOperator  \CF               {\Cal F}
\DeclareMathOperator  \CL               {\Cal L}
\DeclareMathOperator  \CT               {\Cal T}
\DeclareMathOperator  \CP               {\Cal P}
\DeclareMathOperator  \CU               {\Cal U}
\DeclareMathOperator  \CV               {\Cal V}

% Other shortcuts
\DeclareMathOperator  \arccot           {arccot}
\DeclareMathOperator  \OO               {O}
\DeclareMathOperator  \GL               {GL}
\newcommand           \al               {\alpha}
\newcommand           \Tand             {\text{ and }}
\newcommand           \Tor              {\text{ or }}
\newcommand           \Timplies         {\text{ implies }}

% Operations
\newcommand           \Abs          [1] {\left\vert #1 \right\vert}
\newcommand           \Norm         [1] {\left\Vert #1 \right\Vert}
\newcommand           \Gen          [1] {\left\langle #1 \right\rangle}
\newcommand           \Prod         [2] {\left\langle #1, #2 \right\rangle}

% Operators
\DeclareMathOperator  \Aut              {aut}
\DeclareMathOperator  \Ann              {ann}
\DeclareMathOperator  \Bd               {bd}
\DeclareMathOperator  \Card             {card}
\DeclareMathOperator  \Ceil             {ceil}
\DeclareMathOperator  \Char             {char}
\DeclareMathOperator  \Cl               {cl}
\DeclareMathOperator  \Conv             {conv}
\DeclareMathOperator  \Der              {der}
\DeclareMathOperator  \Diam             {diam}
\DeclareMathOperator  \Dist             {dist}
\DeclareMathOperator  \Dom              {dom}
\DeclareMathOperator  \End              {end}
\DeclareMathOperator  \Epi              {epi}
\DeclareMathOperator  \Floor            {floor}
\DeclareMathOperator  \Frac             {frac}
\DeclareMathOperator  \Gph              {gph}
\DeclareMathOperator  \Hom              {hom}
\DeclareMathOperator  \Id               {id}
\DeclareMathOperator  \Img              {im}
\DeclareMathOperator  \Int              {int}
\DeclareMathOperator  \LC               {LC}
\DeclareMathOperator  \Len              {len}
\DeclareMathOperator  \Ord              {ord}
\DeclareMathOperator  \Pow              {pow}
\DeclareMathOperator  \Quot             {quot}
\DeclareMathOperator  \Ran              {ran}
\DeclareMathOperator  \Rank             {rank}
\DeclareMathOperator  \Rem              {rem}
\DeclareMathOperator  \Sign             {sign}
\DeclareMathOperator  \Span             {span}
\DeclareMathOperator  \Spec             {spec}
\DeclareMathOperator  \Supp             {supp}

\AtBeginDocument{
  % https://github.com/wspr/unicode-math/issues/457
  \let\Re\undefined
  \let\Im\undefined
  \DeclareMathOperator  \Re               {Re}
  \DeclareMathOperator  \Im               {Im}
}

% Index
\newcommand \IndexEntry [2] {\index{#2}\textsuperscript{\hyperref[sec:index]{#1}}\xspace}
\newcommand \AOC {\IndexEntry{AOC}{Axiom of choice}}
\newcommand \LEM {\IndexEntry{LEM}{Law of the excluded middle}}
\newcommand \USC {\IndexEntry{USC}{Compactness of the unit sphere}}
\newcommand \IND {\IndexEntry{IND}{Induction}}

% Items
\newcommand           \RItem        [1] {\item[{\ref{#1}}]}
\newcommandx          \DItem        [2][2=] {%
  \ifthenelse{\equal{#2}{}}%
    {\item\label{#1}}%
    {\item[{\crtcrossreflabel{#2}[#1]}]}%
}

\newcommand           \ImpItem      [3] {\item[(%
  \ifthenelse{\equal{#1}{}}%
    {}%
    {\ref{#1}}%
  #3%
  \ifthenelse{\equal{#2}{}}
    {}%
    {\ref{#2}}%
)]}%

\newcommandx          \Implies      [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\implies \)}}
\newcommandx          \ImpliedBy    [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\impliedby \)}}
\newcommandx          \Iff          [2][1=,2=] {\ImpItem{#1}{#2}{\( \symbf\iff \)}}

% Misc
\newcommand           \Email        [1] {\href{mailto:#1}{#1}}
\newcommand           \URL          [1] {\href{#1}{#1}}
\newcommand           \Tinyref      [1] {\allowbreak\textsuperscript{\ref{#1}}}
\newcommand           \Def          [1] {\textbf{#1}}

% https://tex.stackexchange.com/questions/63372/using-nameref-only-if-there-is-a-name
\newcommand{\fullref}[1]{%
  \cref{#1}%
  \if\vcenter\getrefbykeydefault{#1}{name}{}\vcenter
  \else
    \ (\nameref{#1})%
  \fi
}

\newcommand{\Fullref}[1]{%
  \Cref{#1}%
  \if\vcenter\getrefbykeydefault{#1}{name}{}\vcenter
  \else
    \ (\nameref{#1})%
  \fi
}

% https://tex.stackexchange.com/questions/156049/how-can-i-get-cleveref-enumitem-to-print-not-item-e-but-proposition-1
\newcommand \ListStructure [2] {
  \newlist{#1}{enumerate}{2}
  \setlist[#1,1]{label=\alph*), ref=\theproposition~(\alph*)}
  \setlist[#1,2]{label=\roman*), ref=\theproposition~(\alph{#1i} \roman*)}
  \crefalias{#1i}{#2}
  \crefalias{#1ii}{#2}
}
