\section{Combinatorics}\label{sec:combinatorics}
\subsection{Enumerative combinatorics}\label{subsec:enumerative_combinatorics}

\begin{Definition}\label{def:double_index_maps}
  Let \( n, m \) be positive \hyperref[def:integers]{integers}. We want to map single indices to double indices and vice versa. Define the mutually inverse operations
  \begin{align*}
    &\sharp_{n,m}: \{ 1, 2, \ldots, nm \} \to \{ 1, 2, \ldots, n \} \times \{ 1, 2, \ldots, n \} \\
    &\sharp_{n,m}(k) \coloneqq (\Quot(k, m) + 1, \Rem(k, m) + 1)
    &\\
    &\\
    &\flat_{n,m}: \{ 1, 2, \ldots, n \} \times \{ 1, 2, \ldots, n \} \to \{ 1, 2, \ldots, nm \} \\
    &\flat_{n,m}(i, j) \coloneqq (i - 1) \cdot m + (j - 1).
  \end{align*}

  For \( p \)-arity indices, inductively define
  \begin{equation*}
    \sharp_{n_1, n_2, \ldots, n_p}(k) \coloneqq (\sharp_{n_1, n_2, \ldots, n_{p-1}}(a - 1), b),
  \end{equation*}
  where
  \begin{equation*}
    (a, b) = \sharp_{(n_1 n_2 \cdots n_{p-1}), n_p}.
  \end{equation*}
  and
  \begin{equation*}
    \flat_{n_1, n_2, \ldots, n_p}(i_1, \ldots, i_p) \coloneqq \flat_{n_1, n_2, \ldots, n_{p-2}, (n_{p-1} n_p)}(i_1, \ldots, i_{p-2}, \flat_{(n_{p-1} n_p), n_p}(i_{p-1}, i_p) + 1).
  \end{equation*}
\end{Definition}
\begin{proof}
  \begin{align*}
    \sharp(\flat(i, j))
    &=
    \sharp((i - 1) \cdot m + (j - 1))
    = \\ &=
    \Big( \Quot( \cdots, m) + 1, \Rem( \cdots, m) + 1 \Big)
    = \\ &=
    \Big( i - 1 + \Quot(j - 1, m) + 1, \Rem(j - 1, m) + 1 \Big)
    =
    (i, j).
  \end{align*}

  Thus \( \flat \) is left invertible and injective. It is also right invertible since
  \begin{align*}
    \flat(\sharp(k))
    &=
    \flat\left( \Big( \Quot(k, m) + 1, \Rem(k, m) + 1 \Big) \right)
    = \\ &=
    (\Quot(k, m) \cdot m + \Rem(k, m)
    = \\ &=
    [k - \Rem(k, m)] + \Rem(k, m)
    =
    k.
  \end{align*}

  Hence \( \flat \) is bijective and \( \sharp \) is its inverse.
\end{proof}

\begin{Definition}\label{def:factorial}
  The \Def{factorial} of a nonnegative integer \( n \) is defined inductively as
  \begin{equation*}
    n! \coloneqq \begin{cases}
      1,          &n = 0 \\
      (n - 1)! n, &n > 0.
    \end{cases}
  \end{equation*}
\end{Definition}

\begin{Theorem}[Stirling's approximation]\label{thm:stirlings_approximation}
  \begin{equation*}
    n! = \sqrt{2 \pi n} \left(\frac n e \right)^n \left(1 + \OO \left(\frac 1 n \right) \right).
  \end{equation*}
\end{Theorem}

\begin{Definition}\label{def:binomial_coefficient}
  The \Def{binomial coefficients} are defined for positive integers \( n, k \) as
  \begin{equation*}
    \binom n k \coloneqq \frac {n!} {k!(n-k)!}
  \end{equation*}
\end{Definition}

\begin{Theorem}[Pascal's identity]\label{thm:pascals_identity}
  \begin{equation*}
    \binom n k = \binom {n - 1} k + \binom {n - 1} {k - 1}.
  \end{equation*}
\end{Theorem}
\begin{proof}
  \begin{align*}
    \binom {n - 1} k + \binom {n - 1} {k - 1}
    &=
    \frac {(n - 1)!} {k! (n - 1 - k)!} + \frac {(n - 1)!} {(k - 1)! (n - k)!}
    = \\ &=
    \frac {(n - 1)!} {(k - 1)! (n - 1 - k)!} \left[ \frac 1 k + \frac 1 {n - k} \right]
    = \\ &=
    \frac {(n - 1)!} {(k - 1)! (n - 1 - k)!} \frac n {k(n - k)}
    = \\ &=
    \frac {n!} {k! (n - k)!}
    = \\ &=
    \binom n k.
  \end{align*}
\end{proof}
