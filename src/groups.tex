\section{Group theory}\label{sec:group_theory}
\subsection{Groups}\label{subsec:groups}

\begin{remark}\label{remark:numbers_vs_endomorphisms_generalizations}
  Modern algebra takes its roots in abstracting integers\Tinyref{def:integers} and real numbers \Tinyref{def:real_numbers} and their addition and multiplication. Both of these operations are commutative and, if we want to generalize their properties, it is sensible to study commutative operations.

  Another type of objects that usually fit in the same algebraic framework are functions\Tinyref{def:function} and their composition\Tinyref{def:function_composition}. Functions from a set to itself can be composed into another function of the same type, similarly to how two integers can be added to obtain another integer. The specificity is in the non-commutativity of function composition.

  Thus we use the same algebraic structures to study both generalizations of numbers and generalizations of functions over a set. The first case is commutative, the second is not. This is why commutative and non-commutative algebraic structures, even though they are similarly defined, can have very different properties and applications.
\end{remark}

\begin{definition}\label{def:magma}
  We study here algebraic structures\Tinyref{def:algebraic_theory} with a single binary operation. \Cref{def:first_order_model_category} ensures the existence and well-definedness of categories\Tinyref{def:category} of all the structures.

  \begin{itemize}
    \DItem{def:magma/magma} \Def{Magmas} have a single binary operation and no axioms. The operation is denoted by juxtaposition, by \( \cdot \) or by \( + \) (see \cref{remark:additive_group}). The \Def{order} of a magma is the number of elements in its set. The trivial magma\Tinyref{def:first_order_structure/minimal} is the empty set.

    \DItem{def:magma/semigroup} \Def{Semigroups} are magmas where the operation is associative\Tinyref{def:algebraic_theory/associativity}.

    \DItem{def:magma/monoid} \Def{Monoids} are semigroups\Tinyref{def:magma/semigroup} where the operation has an identity\Tinyref{def:algebraic_theory/identity} that is denoted by \( e \), \( 1 \) or \( 0 \), depending on the context. The category of monoids is denoted by \( \Cat{Mon}(\Cat{Set}) \) because of \cref{thm:monoids_are_monoids_in_set}. The trivial monoid\Tinyref{def:first_order_structure/minimal} is defined to be \( \{ e \} \).

    \DItem{def:magma/group} \Def{Groups} are monoids\Tinyref{def:magma/monoid} where the operation is invertible\Tinyref{def:algebraic_theory/invertibile_element}. The inverse is unique by \cref{thm:group_properties/unique_inverse} and is denoted by \( x^{-1} \) for the element \( x \). The category of groups is denoted by \( \Cat{Grp} \).

    In order to fit invertibility into \cref{def:algebraic_theory}, we can use the following formula:
    \begin{equation*}
      \forall \xi ((\xi \doteq 0) \lor \exists \eta (\xi \cdot \eta \doteq 1))
    \end{equation*}

    or add an additional operation \( (\cdot)^{-1} \) that inverts all nonzero elements and fixes

    \DItem{def:magma/abelian_group} \Def{Abelian groups} are groups\Tinyref{def:magma/monoid} where the operation is commutative\Tinyref{def:algebraic_theory/commutativity}. The category of abelian groups is denoted by \( \Cat{Ab} \).
  \end{itemize}

  We define \( x^n \) for integer \( n \) as
  \begin{equation*}
    x^n \coloneqq \begin{cases}
      e, &n = 0 \\
      x \cdot x^{n-1}, &n > 0 \\
      (x^{-n})^{-1}, &n < 0.
    \end{cases}
  \end{equation*}

  An element \( x \) of a monoid has \Def{order} \( \Ord(x) = n \) if \( n \) is the smallest positive integer such that \( x^n = e \). If no such integer exists, we say that \( x \) has infinite order.
\end{definition}

\begin{remark}\label{remark:additive_group}
  Groups are often used to describe sets of invertible functions\Tinyref{def:function_invertibility} where the group operation is composition (see \cref{remark:groupoids} for a categorical viewpoint). As such, the group operation is usually denoted by juxtaposition as in \cref{def:magma}.

  Since composition of functions is not commutative in general, abelian groups are usually not sets of invertible functions. Since abelian groups are \( \Z \)-modules by \cref{thm:abelian_group_iff_z_module}, we usually denote the group operation in abelian groups by \( a + b \) instead of \( ab \), the inverse by \( -a \) instead of \( a^{-1} \), and the unit by \( 0 \).

  To make a further distinction, if the operation is denoted by juxtaposition, we say that the group is a \Def{multiplicative group}, and if the operation is denoted by \( + \), we say that the group is an \Def{additive group}. This terminology usually, but not necessarily, coincides with the group being abelian.
\end{remark}

\begin{example}\label{ex:magmas}
  We give examples and counterexamples of magmas.

  \begin{itemize}
    \item Consider the set \( \R \) of real numbers. Define the \enquote{midpoint} operation
    \begin{align*}
      &\cdot: \R \times \R \to \R \\
      &x \cdot y = \frac {x + y} 2.
    \end{align*}

    Then the tuple \( (\R, \cdot) \) is a magma, however it is not a semigroup since it is not associative:
    \begin{equation*}
      (x \cdot y) \cdot z = \frac {{\frac {x + y} 2} + z} 2 = \frac {x + y + 2z} 4
      \neq
      \frac {2x + y + z} 4 = x \cdot (y \cdot z).
    \end{equation*}

    \item The positive real numbers \( \R_{>0} \) with standard addition form a semigroup, but not a monoid, since the set excludes the zero.

    \item \Cref{thm:functions_over_set_form_monoid} says that the functions from any set to itself form a monoid under composition. This is obviously not a group if at least one of the functions is not invertible.

    \item We can restrict our attention only to invertible functions. The automorphism groups\Tinyref{def:automorphism_group} are groups.
  \end{itemize}
\end{example}

\begin{definition}\label{def:unital_magma_kernel}
  Let \( X \) be an arbitrary set and let \( M \) be a unital\Tinyref{def:algebraic_theory/identity} magma\Tinyref{def:magma/magma} with identity \( e \).

  The \Def{kernel} \( \ker(f) \) of a function \( f: X \to M \) is the preimage\Tinyref{def:function_preimage} \( f^{-1}(e) \).
\end{definition}

\begin{proposition}\label{thm:unital_magma_kernel_is_submonoid}
  The kernel\Tinyref{def:unital_magma_kernel} of a unital magma homomorphism \( f: M \to N \) is a submagma\Tinyref{def:first_order_structure/substructure} \( M \).
\end{proposition}
\begin{proof}
  If \( x, y \in \ker(f) \), then
  \begin{equation*}
    f(xy) = f(x) f(y) = e_N e_N = e_N.
  \end{equation*}

  Thus \( xy \in \ker(f) \) and \( \ker(f) \) is closed under the magma operation.
\end{proof}

\begin{proposition}\label{thm:group_properties}
  Any group \( G \) has the following basic properties:
  \begin{thmenum}
    \DItem{thm:group_properties/cancellative} The operation is cancellative\Tinyref{def:algebraic_theory/cancellative}.
    \DItem{thm:group_properties/unique_inverse} The inverse \( x^{-1} \) of every element \( x \) is unique.
    \DItem{thm:group_properties/identity_inverse} The identity \( e \) is its own inverse.
    \DItem{thm:group_properties/inverse_composition} \( (xy)^{-1} = y^{-1} x^{-1} \).
    \DItem{thm:group_properties/double_inverse} For any \( x \in G \), \( x = (x^{-1})^{-1} \)
    \DItem{thm:group_properties/negative_power} For any \( x \in G \) and positive integer \( n \), \( x^{-n} = (x^n)^{-1} = (x^{-1})^n \)
  \end{thmenum}
\end{proposition}
\begin{proof}\mbox{}
  \begin{itemize}
    \RItem{thm:group_properties/cancellative} If \( x = y \), obviously \( xz = yz \) and \( zx = zy \). Now if \( xz = yz \), we have
    \begin{equation*}
      x = xzz^{-1} = yzz^{-1} = y.
    \end{equation*}

    The case \( zx = zy \) is analogous.

    \RItem{thm:group_properties/unique_inverse} If \( y \) and \( z \) are both inverses of \( x \), then \( y = ey = zxy = ze = z \).
    \RItem{thm:group_properties/identity_inverse} \( ee = e \).
    \RItem{thm:group_properties/inverse_composition}
    \begin{align*}
      (xy) (y^{-1} x^{-1})
      =
      x (y y^{-1}) x^{-1}
      =
      e
      =
      y^{-1} (x^{-1} x) y
      =
      (y^{-1} x^{-1}) (xy).
    \end{align*}

    \RItem{thm:group_properties/double_inverse}
    \begin{align*}
      (x^{-1})^{-1}
      =
      x x^{-1} (x^{-1})^{-1}
      =
      x.
    \end{align*}

    \RItem{thm:group_properties/negative_power} Using~\ref{thm:group_properties/double_inverse},
    \begin{align*}
      x^{-n}
      =
      (x^n)^{-1}
      =
      x^{-1} \cdots x^{-1}
      =
      (x^{-1})^n.
    \end{align*}
  \end{itemize}
\end{proof}

\begin{proposition}\label{thm:monoids_are_monoids_in_set}
  A monoid in the sense of \cref{def:magma/monoid} is a monoid in \( \Cat{Set} \) in the sense of \cref{def:categorical_monoid}.
\end{proposition}
\begin{proof}
  By \cref{thm:set_is_monoidal}, \( \Cat{Set} \) is monoidal with the Cartesian product as a monoidal product. Let \( M \) be a monoid in the sense of \cref{def:magma/monoid}. We define the morphism \( \mu: M \times M \to M \) to be the monoid operation and the morphism \( \eta: \{ \varnothing \} \to M \) to be the identity operation. Then the diagrams in \cref{def:categorical_monoid} are trivially verified to commute.

  The categorical definition of morphism between monoids in \( \Cat{Set} \) is then a restatement of the definition of homomorphism of a monoid: if \( (M, \mu, \eta) \) and \( (M', \mu', \eta') \) are monoids, then
  \begin{equation*}
    (f \circ \mu)(x, y)
    =
    f(xy)
    =
    f(x) f(y)
    =
    (\mu' \circ (f \otimes f))(x, y)
  \end{equation*}
  and
  \begin{equation*}
    (f \circ \eta)(\{ \varnothing \})
    =
    f(e_M)
    =
    e_{M'}
    =
    \eta'(\{ \varnothing \})
  \end{equation*}
\end{proof}

\begin{definition}\label{def:automorphism_group}
  Given a locally small category\Tinyref{def:category} \( \Cat{C} \), we call \( \Cat{C}(A) \) the \Def{automorphism group} over \( A \) and denote it by \( \Aut(A) \).
\end{definition}

\begin{definition}\label{def:symmetric_group}
  We define the \Def{symmetric group} of order \( n \) as the group
  \begin{equation*}
    S_n \coloneqq \Aut(\{ 1, 2, \ldots, n \})
  \end{equation*}
  of all bijections from the set \( \{ 1, 2, \ldots, n \} \) to itself.

  Members of \( S_n \) are called \Def{permutations}.

  We say that the pair \( (p(i), p(j)) \) is an \Def{inversion} of the permutation \( p \) if \( i < j \) and \( p(i) > p(j) \).

  A permutation is said to be \Def{even} or \Def{odd} depending on whether it has an even or odd number of inversions. We define
  \begin{align*}
    &\Sign: S_n \to \{ -1, 1 \}, \\
    &\Sign(p) \coloneqq \begin{cases}
      1, &p \text{ is even} \\
      -1, &p \text{ is odd}
    \end{cases}
  \end{align*}

  The subgroup of all even permutations is denoted by \( A_n \) and is called the \Def{alternating group} of order \( n \).
\end{definition}

\begin{definition}\label{def:cyclic_group}
  We define the \Def{infinite cyclic group}
  \begin{equation*}
    C \coloneqq \Gen{a}
  \end{equation*}
  and, for positive integers \( n \), the \Def{finite cyclic group}
  \begin{equation*}
    C_n \coloneqq \Gen{a \mid a^n}.
  \end{equation*}
\end{definition}

\begin{proposition}\label{thm:cyclic_group_isomorphic_to_integers_modulo_n}
  Let \( C \) be a cyclic group\Tinyref{def:cyclic_group}. If \( C \) is finite of order \( n \), it is isomorphic to the group \( \Z_n \) of integers modulo \( n \)\Tinyref{def:group_of_integers_modulo}.
\end{proposition}
\begin{proof}
  The homomorphism
  \begin{align*}
    &\varphi: \Z_n \to C_n \\
    &\varphi(k) \coloneqq a^k
  \end{align*}
  and the analogous homomorphism for the infinite group, is an isomorphism.
\end{proof}

\begin{proposition}\label{thm:group_homomorphism_single_condition}
  A function \( f: G \to H \) between the groups \( G \) and \( H \) is a homomorphism in the sense of \cref{def:first_order_homomorphism} if and only if for any \( x, y \in G \) it satisfies
  \begin{equation}\label{thm:group_homomorphism_single_condition/condition}
    f(xy) = f(x) f(y).
  \end{equation}

  In other words, if a function satisfies \cref{thm:group_homomorphism_single_condition/condition}, it preserves identities and inverses.
\end{proposition}
\begin{proof}
  \begin{description}
    \Implies This is a special case of the more general definition.
    \ImpliedBy Let the function \( f \) satisfy \cref{thm:group_homomorphism_single_condition/condition}. Then it preserves identities since
    \begin{equation*}
      e_H f(e_G) = f(e_G) = f(e_G e_G) = f(e_G) f(e_G)
    \end{equation*}
    and by \cref{thm:group_properties/cancellative}, the operation is cancellative.

    Inverses are preserved because
    \begin{equation*}
      f(x^{-1})
      =
      f(x^{-1}) e_H
      =
      f(x^{-1}) f(x) f(x)^{-1}
      =
      f(x^{-1} x) f(x)^{-1}
      =
      e_H f(x)^{-1}
      =
      f(x)^{-1}.
    \end{equation*}
  \end{description}
\end{proof}

\begin{definition}\label{def:groupoid}
  A \Def{groupoid} is a category\Tinyref{def:category} in which all morphisms are isomorphisms\Tinyref{def:morphism_invertibility}.
\end{definition}

\begin{definition}\label{remark:groupoids}
  Let \( \Bold G \) be a locally small with a single object \( g \). Then the endomorphisms of \( g \) form a monoid\Tinyref{def:magma} under composition and the subcategory of \( \Bold G \) in which all morphisms are isomorphisms forms a group\Tinyref{def:magma}. Thus, if \( \Bold G \) is a locally small groupoid with a single object \( g \), then the endomorphisms of \( g \) are automorphisms and, thus, they form a group under composition.
\end{definition}

\begin{definition}\label{def:group_cosets}
  Let \( H \subseteq G \) be a subgroup of \( G \) and let \( x \in G \). Consider the sets
  \begin{align*}
    xH \coloneqq \{ xh \colon h \in H \}
    &&
    Hx \coloneqq \{ hx \colon h \in H \}
  \end{align*}
  called the \Def{left and right cosets of \( H \) with respect to \( x \)}.
\end{definition}

\begin{proposition}\label{thm:coset_partition}
  The left (resp. right) cosets of a subgroup \( H \) of \( G \) partition\Tinyref{def:set_partition} \( G \).
\end{proposition}
\begin{proof}
  To each element \( x \in G \) there corresponds a coset \( x \in xH \) (since \( H \) contains the identity as a subgroup).

  Two cosets \( xH \) and \( yH \) are either disjoint or equal. Indeed, if they are not disjoint, then there exists \( g \in xH \cap yH \) and thus \( g = xa = yb \) for some \( a, b \in H \). Thus \( x = x a a^{-1} = y b a^{-1} \) and since \( b a^{-1} \in H \), we have that \( x \in yH \). Furthermore, for any \( c \in H \), we have \( xc = y(b a^{-1} c) \in yH \), hence \( xH \subseteq yH \). After obtaining the converse inclusion, we conclude \( xH = yH \).
\end{proof}

\begin{definition}\label{def:normal_subgroup}
  Let \( N \) be a subgroup of \( G \). We say that \( N \) is a normal subgroup if any of the following equivalent conditions hold:
  \begin{defenum}
    \DItem{def:normal_subgroup/direct} For any \( x \in G \), we have the set equality \( x N x^{-1} = N \).
    \DItem{def:normal_subgroup/cosets} The partitions induced by the left and rights cosets of \( N \) coincide (\( xN = Nx \)).
    \DItem{def:normal_subgroup/kernel} \( N \) is the kernel\Tinyref{def:unital_magma_kernel} of some group homomorphism (in particular, kernels are always normal subgroups).
  \end{defenum}
\end{definition}
\begin{proof}
  This is the group-theoretic analog to \cref{thm:equivalence_partition}.

  \begin{description}
    \Implies[def:normal_subgroup/direct][def:normal_subgroup/cosets] For any \( x \in G \)
    \begin{equation*}
      Nx = (xNx^{-1})x = xN(x^{-1}x) = xN,
    \end{equation*}
    thus every left coset is a right coset and vice versa.

    \Implies[def:normal_subgroup/cosets][def:normal_subgroup/kernel] The proof of correctness in \cref{def:quotient_group} only uses \ref{def:normal_subgroup/cosets}. Therefore we can take the canonical projection \( \pi(x) \coloneqq xN \) as the homomorphism without causing circular references.

    \Implies[def:normal_subgroup/kernel][def:normal_subgroup/direct] Let \( f: G \to K \) be a group homomorphism and fix any \( x \in G \). Denote \( N \coloneqq \ker(f) \). Then \( xN = Nx \) since
    \begin{equation*}
      f(xN)
      =
      f(x) f(N)
      =
      f(x) f(e_G)
      =
      f(x)
      =
      f(N) f(x)
      =
      f(Nx).
    \end{equation*}

    Thus
    \begin{equation*}
      N = xx^{-1}N = xNx^{-1}.
    \end{equation*}
  \end{description}
\end{proof}

\begin{definition}\label{def:quotient_group}
  Let \( G \) be a group and \( N \) be a normal subgroup of \( G \). Define the \Def{quotient group}
  \begin{equation*}
    G / N \coloneqq \{ xN \colon x \in G \}
  \end{equation*}
  with the group operation
  \begin{equation*}
    xN \odot yN \coloneqq xyN.
  \end{equation*}

  Define the canonical projection homomorphism
  \begin{align*}
    &\pi: G \to G / N \\
    &\pi(x) \coloneqq xN.
  \end{align*}

  The kernel of \( \pi \) is precisely \( N \).
\end{definition}
\begin{proof}
  This definition is used in the proof of equivalence in \cref{def:normal_subgroup}. This is why it is important to only use \cref{def:normal_subgroup/cosets} as the definition for a normal subgroup.

  We first check that the group operations is well defined, that is, does not depend on the choice of coset representatives. Fix \( x, x' \in G \) and \( y, y' \in G \) so that
  \begin{equation*}
    xN = x'N
  \end{equation*}
  and
  \begin{equation*}
    yN = y'N.
  \end{equation*}

  Since the left and right cosets coincide, we have
  \begin{equation*}
    xyN = xNy = x'Ny = x'Ny' = x'y'N.
  \end{equation*}

  Thus the operation is well defined.

  It follows from the definition of the operation that the identity is \( eN = N \) and the inverse of \( xN \) is \( x^{-1} N \). Therefore \( G / N \) is indeed a group. The fact that \( \pi \) is a homomorphism is also part of the definition of \( \odot \).

  Obviously \( \pi(N) = N \) so \( N \subseteq \ker \pi \). For the converse, assume\LEM that there exists \( x \in \ker \pi \setminus N \). Then there exists \( y \in N \) such that \( xy \in N \). But \( N \) is closed under multiplication and inverses, hence \( x = xyy^{-1} \in N \). This contradicts our assumption that \( x \not\in N \). The obtained contradiction proves that \( N = \ker \pi \).
\end{proof}

\begin{theorem}\label{thm:homomorphism_theorem_for_groups}
  Let \( \varphi: G \to H \) be a homomorphism of groups. We have the isomorphism
  \begin{equation*}
    G / \ker \varphi \cong \Img \varphi.
  \end{equation*}
\end{theorem}
\begin{proof}
  Denote \( N \coloneqq \ker \varphi \). Define the function
  \begin{align*}
    &\psi: G / N \to \Img \varphi \\
    &\psi(xN) \coloneqq \varphi(x).
  \end{align*}

  This definition does not depend on the representative of \( xN \). Indeed, let \( x'N = xN \). Then there exists \( n \in N \) such that \( x = x' n \). Hence
  \begin{equation*}
    \psi(xN) = \varphi(x) = \varphi(x' n) = \varphi(x') \varphi(n) = \varphi(x') = \psi(x'N).
  \end{equation*}

  The function \( \psi \) is a homomorphism because
  \begin{equation*}
    \psi(xN yN) = \psi(xyN) = \varphi(xy) = \varphi(x) \varphi(y) = \psi(xN) \psi(yN).
  \end{equation*}

  This also shows that \( \psi \) is bijective. Thus \( \psi \) is the desired isomorphism.
\end{proof}

\begin{proposition}\label{thm:abelian_normal_subgroups}
  All subgroups of an abelian group are normal.
\end{proposition}
\begin{proof}
  Let \( G \) be abelian and \( H \) be a subgroup of \( G \). Then \( xGx^{-1} = xx^{-1}H = H \) for any \( x \in G \) and thus \( H \) is normal.
\end{proof}

\begin{definition}\label{def:group_of_integers_modulo}
  The integers\Tinyref{def:integers} \( \Z \) form an abelian group under addition. Fix a positive integer \( n \). We define the group
  \begin{equation*}
    \Z_n \coloneqq \{ 0, 1, \ldots, n - 1 \}
  \end{equation*}
  with the operation
  \begin{align*}
    x \oplus y \coloneqq \Rem(x + y, n)
  \end{align*}
  so that
  \begin{equation*}
    x \oplus y \equiv x + y \pmod n.
  \end{equation*}

  The group \( \Z_n \) is called the \Def{group of integers modulo} \( n \). For \( n = 1 \), this is the trivial group.
\end{definition}
\begin{proof}
  We will prove that \( \Z_n \) is an abelian group.

  \begin{description}
    \RItem{def:magma/semigroup} Addition in \( \Z_n \) is associative since
    \begin{align*}
      (x \oplus y) \oplus z
      &=
      \Rem((x \oplus y) + z, n)
      = \\ &=
      \Rem(\Rem(x + y, n) + z, n)
      = \\ &=
      \Rem(x + y - n \Quot(x + y, n) + z, n)
      = \\ &=
      \Rem(x + y + z, n)
      = \\ &=
      \ldots
      = \\ &=
      x \oplus (y \oplus z).
    \end{align*}

    \RItem{def:magma/monoid} The zero is obviously the identity.

    \RItem{def:magma/group} Fix \( x \in \Z_n \). If \( x = 0 \), its inverse is \( 0 \). If \( x > 0 \), its inverse is \( n - x \) since \( n - x \in \Z_n \) and
    \begin{equation*}
      x \oplus (n - x) = x + (n - x) - n = 0.
    \end{equation*}

    \RItem{def:magma/abelian_group} Commutativity follows from
    \begin{equation*}
      x \oplus y
      =
      \Rem(x + y, n)
      =
      \Rem(y + x, n)
      =
      y \oplus x.
    \end{equation*}
  \end{description}
\end{proof}

\begin{proposition}\label{thm:integers_modulo_isomorphic_to_quotient_group}
  The group \( \Z_n \)\Tinyref{def:group_of_integers_modulo} is isomorphic to the quotient of \( \Z \) by \( n\Z = \{ nz : z \in \Z \} \), i.e.
  \begin{equation*}
    \Z_n \cong \Z / n\Z.
  \end{equation*}
\end{proposition}
\begin{proof}
  Define the function
  \begin{align*}
    &\varphi: \Z_n \to \Z / n\Z \\
    &\varphi(x) \coloneqq x + n\Z.
  \end{align*}

  It is a homomorphism because
  \begin{align*}
    \varphi(x \oplus y)
    &=
    \varphi(\Rem(x + y, n))
    = \\ &=
    \varphi(x + y - n \Quot(x + y, n))
    = \\ &=
    x + y - n \Quot(x + y, n) + n\Z
    = \\ &=
    x + y + n\Z
    = \\ &=
    (x + n\Z) + (y + n\Z)
    = \\ &=
    \varphi(x) + \varphi(y).
  \end{align*}
\end{proof}

\begin{definition}\label{def:group_direct_product}
  Let \( \{ X_i \}_{i \in I} \) be a nonempty family of groups.

  We define their \Def{direct product} as the group \( \prod_{i \in I} X_i \), the group operation defined componentwise as
  \begin{align*}
    \{ x_i \}_{i \in I} \cdot \{ y_i \}_{i \in I}
    \coloneqq
    \{ x_i \cdot y_i \}_{i \in I}.
  \end{align*}

  We define their \Def{direct sum} as the subgroup of \( \prod_{i \in I} X_i \)\Tinyref{def:group_direct_product} where only finitely many components of any group element are different from zero.
\end{definition}

\begin{remark}\label{def:group_direct_sum_external_internal}\cite[126]{Knapp2016BAlg}
  If we are given a family of groups as in \cref{def:group_direct_product}, their sum \( \oplus_{i \in I} X_i \) is sometimes called an \Def{external direct sum}.

  If instead we are given a group \( X \) and a family of subgroups \( \{ X_i \}_{i \in I} \), we say that \( X \) is their \Def{internal direct sum} if the homomorphism
  \begin{align*}
    &\varphi: \prod_{i \in I} X_i \to X \\
    &\varphi(\{ x_i \}_{i \in I}) \coloneqq \cdot_{i \in I} x_i
  \end{align*}
  is an isomorphisms.

  The sum is well-defined since by definition there are only finitely many non-identity summands.

  This terminology also applies to finite direct products\Tinyref{def:group_direct_product} of groups, as well as similar constructions for other algebraic structures.
\end{remark}

\begin{proposition}\label{thm:group_categorical_limits}
  We are interested in categorical limits\Tinyref{def:categorical_limit} and colimits\Tinyref{def:categorical_colimit} in \( \Cat{Grp} \). If \( \{ X_i \}_{i \in I} \) is an indexed family of groups, then
  \begin{defenum}
    \DItem{thm:group_categorical_limits/product} their categorical product\Tinyref{def:categorical_product} is their direct product\Tinyref{def:group_direct_product} \( \prod_{i \in I} X_i \), the projection morphisms being inherited from \cref{thm:set_categorical_limits/product}.

    \DItem{thm:group_categorical_limits/coproduct} their categorical coproduct\Tinyref{def:categorical_coproduct} is their free product\Tinyref{def:group_free_product} \( \ast_{i \in I} X_i \), the injection morphisms being
    \begin{align*}
      &\iota_j: X_j \to \ast_{i \in I} X_i \\
      &\iota_j(x_j) \coloneqq x_j.
    \end{align*}
  \end{defenum}
\end{proposition}

\begin{proposition}\label{thm:abelian_group_categorical_limits}
  We are interested in categorical limits\Tinyref{def:categorical_limit} and colimits\Tinyref{def:categorical_colimit} in \( \Cat{Ab} \). If \( \{ X_i \}_{i \in I} \) is an indexed family of abelian groups, then
  \begin{defenum}
    \DItem{thm:abelian_group_categorical_limits/product} their categorical product\Tinyref{def:categorical_product} is the direct product as inherited from \cref{thm:group_categorical_limits}.

    \DItem{thm:abelian_group_categorical_limits/coproduct} their categorical coproduct\Tinyref{def:categorical_coproduct} is the direct sum\Tinyref{def:group_direct_product} \( \oplus_{i \in I} X_i \), the injection morphisms being
    \begin{align*}
      &\iota_j: X_j \to \oplus_{i \in I} X_i \\
      &\iota_j(x_j) \coloneqq \begin{dcases}
        \begin{drcases}
          x_j, &i = j \\
          e_i, &i \neq j
        \end{drcases}
      \end{dcases}_{i \in \Bold I}.
    \end{align*}

    Since \( \Cat{Ab} \) is a subcategory of \( \Cat{Grp} \), by \cref{thm:group_categorical_limits} we have that for abelian groups the notions of free product\Tinyref{def:group_free_product} and direct sum coincide.
  \end{defenum}
\end{proposition}

\begin{remark}\label{remark:abelian_group_biproducts}
  By \cref{thm:preadditive_category_biproducts}, finite direct products and finite direct sums of abelian groups coincide as biproducts. This is also obvious by definition, even for nonabelian groups. What is not obvious, however, is that finite free products and finite direct products coincide for abelian groups.
\end{remark}

\begin{proposition}\label{thm:ab_is_monoidal}
  The category \( \Cat{Ab} \) has two monoidal structures. It is monoidal with
  \begin{itemize}
    \item the direct sum\Tinyref{def:group_direct_product} acting as a monoidal product
    \item the trivial group \( \{ e \} \) acting as an identity object
    \item natural transformations
    \begin{align*}
      \alpha &\coloneqq \Id \\
      \lambda(\{ e \} \times A) &\coloneqq A \\
      \rho(A \times \{ e \}) &\coloneqq A
    \end{align*}
  \end{itemize}
  and with
  \begin{itemize}
    \item the tensor product\Tinyref{def:module_tensor_product} (see \cref{thm:abelian_group_iff_z_module}) acting as a monoidal product
    \item the integers \( (\Z, +) \) acting as an identity object
    \item natural transformations
    \begin{align*}
      \alpha &\coloneqq \Id \\
      \lambda &\coloneqq \Id \\
      \rho &\coloneqq \Id
    \end{align*}
  \end{itemize}
\end{proposition}
\begin{proof}
  All conditions in \cref{def:monoidal_category} are trivially satisfied for the direct sum structure.

  The other conditions are also satisfied due to \cref{thm:tensor_product_with_underlying_ring}.
\end{proof}

\begin{proposition}\label{thm:ab_is_abelian}
  The category \( \Cat{Ab} \) of abelian group\Tinyref{def:magma/abelian_group} is abelian\Tinyref{def:abelian_category} (enriched with the direct sum monoidal structure\Tinyref{thm:ab_is_monoidal}).
\end{proposition}
\begin{proof}
  The category \( \Cat{Ab} \) is enriched\Tinyref{def:enriched_category} over itself in an obvious way.

  Composition is bilinear because it is the usual function composition. Hence \( \Cat{Ab} \) is preadditive \Tinyref{def:preadditive_category}.

  Finite products and coproducts exist by \cref{thm:group_categorical_limits}, thus \( \Cat{Ab} \) is additive\Tinyref{def:additive_category}.

  Every homomorphism \( f: G \to H \) has a kernel \( \ker(f) \) (the usual kernel in the sense of \cref{def:unital_magma_kernel}) and a cokernel
  \begin{equation*}
    \Co\ker(f) \coloneqq H / f(G).
  \end{equation*}

  Furthermore, because of the equivalences in \cref{def:normal_subgroup}, all embeddings\Tinyref{def:first_order_homomorphism/embedding} have trivial kernels and all projections\Tinyref{def:first_order_homomorphism/projection} have trivial cokernels.

  Thus \( \Cat{Ab} \) is abelian.
\end{proof}

\begin{definition}\label{def:monoid_completion}
  A completion of a monoid is a minimal\Tinyref{def:poset/maximal_minimal_element} (under homomorphic embedding) group.
\end{definition}

\begin{proposition}\label{thm:monoid_completion_to_abelian_group}\cite{nLab:grothendieck_group_of_a_commutative_monoid}
  Every commutative\Tinyref{def:algebraic_theory/commutativity} monoid\Tinyref{def:magma/monoid} can be completed\Tinyref{def:monoid_completion} using the \Def{Grothendieck completion} to form an abelian group.
\end{proposition}
\begin{proof}
  Let \( M \) be a commutative monoid. Define the relation \( \cong \) on tuples of members of \( M \) as
  \begin{equation*}
    (x_1, x_2) \cong (y_1, y_2) \iff \exists a: x_1 + y_2 + a = y_1 + x_2 + a.
  \end{equation*}

  This is an equivalence relation because
  \begin{description}
    \RItem{def:order/equivalence/reflexivity}
    \begin{equation*}
      (x_1, x_2) \cong (x_1, x_2) \iff x_1 + x_2 + 0 = x_1 + x_2 + 0
    \end{equation*}

    \RItem{def:order/equivalence/symmetry} By commutativity,
    \begin{align*}
      (x_1, x_2) \cong (y_1, y_2)
      &\iff 
      \exists a: x_1 + y_2 + a = y_1 + x_2 + a
      \\ &\iff
      \exists a: y_1 + x_2 + a = x_1 + y_2 + a
      \\ &\iff
      (y_1, y_2) \cong (x_1, x_2)
    \end{align*}

    \RItem{def:order/equivalence/transitivity} Let \( (x_1, x_2) \cong (y_1, y_2) \) and \( (y_1, y_2) \cong (z_1, z_2) \). Thus there exist \( a, b \in \N \) such that
    \begin{equation*}
      [x_1 + y_2 + a = y_1 + x_2 + a] \land [y_1 + z_2 + b = z_1 + y_2 + b]
    \end{equation*}

    Summing both sides, we have
    \begin{equation*}
      x_1 + y_2 + a + y_1 + z_2 + b = y_1 + x_2 + a + z_1 + y_2 + b
    \end{equation*}

    We reorder both sides to obtain
    \begin{equation*}
      (x_1 + z_2) + (y_1 + y_2 + a + b) = (x_2 + z_1) + (y_1 + y_2 + a + b),
    \end{equation*}
    which implies \( (x_1, x_2) \cong (z_1, z_2) \).
  \end{description}

  Define \( G \coloneqq M^2 / \cong \) to be the equivalence partition\cref{thm:equivalence_partition} of \( M \times M \). Define addition in \( G \) on members of \( M \times M \) by
  \begin{equation*}
    (x_1, x_2) + (y_1, y_2)
    \coloneqq
    (x_1 + y_1, x_2 + y_2).
  \end{equation*}

  This addition does not depend on the representative of the equivalence class since \( (x_1, x_2) \cong (x_1', x_2') \) and \( (y_1, y_2) \cong (y_1', y_2') \) implies the existence of \( k, m \in \N \), such that
  \begin{align*}
    x_1 + x_2' + a &= x_2 + x_1' + a,
    y_1 + y_2' + b &= y_2 + y_1' + b,
  \end{align*}
  which, when combined, give
  \begin{align*}
    (x_1 + x_2' + a) + (y_1 + y_2' + b)
    &=
    (x_2 + x_1' + a) + (y_2 + y_1' + b)
    \\
    (x_1 + y_1) + (x_2' + y_2') + (a + b)
    &=
    (x_2 + y_2) + (y_1 + x_1) + (a + b).
  \end{align*}

  This implies
  \begin{align*}
    (x_1 + y_1, x_2 + y_2)
    \cong
    (x_1' + y_1', x_2' + y_2').
  \end{align*}

  The equivalence class \( [(0, 0)] \) is obviously an identity in \( G \) and contains exactly the pairs \( (x, x) \) of identical elements.

  For each member \( (x_1, x_2) \in M \times M \) we define its inverse as \( (x_2, x_1) \). It is indeed an inverse since
  \begin{equation*}
    (x_1, x_2) + (x_2, x_1) = (x_1 + x_2, x_2 + x_1),
  \end{equation*}
  which, by commutativity, belongs to \( [(0, 0)] \).

  If \( (x_1, x_2) \cong (x_1', x_2') \), then
  \begin{equation*}
    (x_1, x_2) + (x_2', x_1')
    =
    (x_1 + x_2', x_2 + x_1'),
  \end{equation*}
  where the two representatives of a pair of inverses are equal because of the equivalence \( \cong \).

  Thus \( + \) is a well-defined commutative operation on \( G \) with identity, making it an abelian group.

  Furthermore, the function
  \begin{align*}
    &\varphi: M \to G \\
    &\varphi(x) \coloneqq [(x, 0)]
  \end{align*}
  is a monoid homomorphism, hence \( M \) is indeed embedded in the group. Furthermore, any group that embeds \( G \) must also embed \( M \) since \( G \setminus \varphi(M) \) consists only of the \enquote{inverse} elements of \( \varphi(M) \).
\end{proof}

\begin{definition}\label{def:group_commutator}
  Let \( G \) be a group. The commutator of \( x, y \in G \) is defined as
  \begin{equation*}
    [x, y] \coloneqq xyx^{-1}y^{-1}.
  \end{equation*}

  The commutator subgroup of \( G \) is the subgroup generated\Tinyref{def:group_presentation} by all the commutators in \( G \).
\end{definition}

\begin{proposition}\label{thm:quotient_by_commutator_subgroup}\cite[proposition 7.4]{Knapp2016BAlg}
  The commutator group \( G' \) of any group \( G \) is normal\Tinyref{def:normal_subgroup} and the quotient \( G / G' \) is abelian\Tinyref{def:magma/abelian_group}.
\end{proposition}

\begin{definition}\label{def:opposite_group}
  Let \( (G, \cdot) \) be a group. We define its \Def{opposite group} as the group \( (G, \odot) \) with multiplication reversed:
  \begin{equation*}
    x \odot y \coloneqq y \cdot x.
  \end{equation*}

  We denote the opposite group of \( G \) by \( G^{-1} \).
\end{definition}

\begin{definition}\label{def:generated_subgroup}
  Let \( S \subseteq G \) be any nonempty subset of a group \( G \). We define the subgroup generated by \( S \) equivalently as either
  \begin{defenum}
    \DItem{def:generated_subgroup/minimal} the smallest subgroup of \( G \) that contains \( S \).
    \DItem{def:generated_subgroup/presentation} the subgroup of \( G \) that is isomorphic to the free group \( F(S) \).
    \DItem{def:generated_subgroup/direct} the subgroup
    \begin{equation*}
      \Gen S \coloneqq \left\{ \prod S' \mid S' \text{ is a finite subset of } S \cup S^{-1} \right\},
    \end{equation*}
    where \( S^{-1} \coloneqq \{ s^{-1} \mid s \in S \} \).
  \end{defenum}

  If \( S \) is finite, then \( \Gen S \) is called \Def{finitely generated}.
\end{definition}
