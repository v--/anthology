\begin{definition}\label{def:group}(See \cref{ex:algebraic_theory_language})
  A \uline{magma} is a nonempty set $G$ with a function $\cdot: G \times G \to G$, called the \uline{magma operation}. Denote $\cdot(a, b)$ by juxtaposition, that is, $ab$.

  \begin{description}
    \DItem{Associativity}{def:group/associativity} If $(ab)c = a(bc)$ for all $a, b, c \in G$, we say that the operation is \uline{associative} and we call the pair $(G, \cdot)$ a \uline{semigroup}.
    \DItem{Identity}{def:group/identity} An \uline{identity} is an element $e \in G$ such that $ea = ae = a$ for every $a \in G$. If an identity exists, it is unique by~\cref{def:group_properties/unique_identity}. If $(G, \cdot)$ is a semigroup with an identity, we call it a \uline{monoid} (see also \cref{def:monoidal_category} and \cref{note:groupoids}). We can also consider the identity in a monoid to be a function with arity 0. If the monoid is not obvious from the context, we write $e_G$.
    \DItem{Inverse}{def:group/inverse} For each $a \in G$, the \uline{inverse} is an element $a^{-1} \in G$ such that $aa^{-1} = e$. It is unique for each element by~\cref{def:group_properties/unique_inverse}. If $(G, \cdot)$ is a monoid and each element has an inverse, we call it a \uline{group}. We can also consider the inverse in a group to be a function with arity 1.
    \DItem{Commutativity}{def:group/commutativity} If $ab = ba$ for all $a, b \in G$, we say that the magma operation is \uline{commutative}. If $(G, \cdot)$ is a group with a commutative operation, we call it a \uline{commutative group} or \uline{abelian group}.
  \end{description}

  We define $a^n$ for integer $n$ as
  \begin{align*}
    a^n \coloneqq \begin{cases}
      e, &n = 0 \\
      a \cdot a^{n-1}, &n > 0 \\
      (a^{-n})^{-1}, &n < 0.
    \end{cases}
  \end{align*}

  We say that
  \begin{defenum}
    \item\label{def:group/trivial_group} the group $\{ e \}$ is called the \uline{trivial group}.
    \item\label{def:group/subgroup} the subset $H \subseteq G$ is a \uline{submagma (resp. subsemigroup, submonoid, subgroup, etc) of $G$} if $H$ is closed under the magma operation, that is, $ab \in H$ whenever $a, b \in H$.
    \item\label{def:group/trivial_subgroup} the subgroup $\{ e_G \}$ of $G$ is called the \uline{trivial subgroup}
    \item\label{def:group/proper_subgroup} all subgroups except for $G$ itself are \uline{proper subgroups}.
    \item\label{def:group/finite_order} $a$ is of \uline{finite order} $\Ord(a) = n$ if $n$ is the smallest positive integer such that $a^n = e$.
    \item\label{def:group/infinite_order} $a$ is of \uline{infinite order} $\Ord(a) = \infty$ if $a^n \neq e$ for any positive integer $n$.
    \item\label{def:group/absorbing_element} $a$ is an \uline{absorbing element} if $ba = ab = a$ for any $b \in G$.
  \end{defenum}
\end{definition}

\begin{note}\label{note:additive_group}
  Groups are often used to describe sets of invertible functions\Tinyref{def:function_invertibility} where the group operation is composition (see~\cref{note:groupoids} for a categorical viewpoint). As such, the group operation is usually denoted by juxtaposition as in~\cref{def:group}.

  Since composition of functions is not commutative in general, abelian groups are usually not sets of invertible functions. Since abelian groups are $\BB{Z}$-modules~\Tinyref{thm:abelian_group_iff_z_module}, we usually denote the group operation in abelian groups by $a + b$ instead of $ab$, the inverse by $-a$ instead of $a^{-1}$, and the unit by $0$.

  To make a further distinction, if the operation is denoted by juxtaposition, we say that the group is a \uline{multiplicative group}, and if the operation is denoted by $+$, we say that the group is an \uline{additive group}. This terminology usually, but not necessarily, coincides with the group being abelian.
\end{note}

\begin{definition}\label{def:symmetric_group}
  Let $A$ be an arbitrary set. We associate with $A$ the \uline{symmetric group} $S(A)$ whose elements are bijections from $A$ to itself and whose group operation is function composition.
\end{definition}

\begin{proposition}\label{def:group_properties}
  Any group $G$ has the following basic properties:
  \begin{defenum}
    \item\label{def:group_properties/unique_identity} The identity $e$ is unique (also holds for monoids).
    \item\label{def:group_properties/unique_inverse} The inverse $a^{-1}$ of every element is unique.
    \item\label{def:group_properties/identity_inverse} The identity $e$ is its own inverse.
    \item\label{def:group_properties/inverse_composition} $(ab)^{-1} = b^{-1} a^{-1}$.
    \item\label{def:group_properties/double_inverse} For any $a \in G$, $a = (a^{-1})^{-1}$
    \item\label{def:group_properties/negative_power} For any $a \in G$ and positive integer $n$, $a^{-n} = (a^n)^{-1} = (a^{-1})^n$
    \item\label{def:group_properties/cancellation} For any $a, b, c \in G$, the cancellation laws $a = b \iff ac = bc \iff ca = cb$ hold.
  \end{defenum}
\end{proposition}
\begin{proof}\mbox{}
  \begin{itemize}
    \item[\ref{def:group_properties/unique_identity}] If $e'$ is another identity element of $G$, then $e' = e' e = e$.
    \item[\ref{def:group_properties/unique_inverse}] If $b$ and $c$ are both inverses of $a$, then $b = eb = cab = ce = c$.
    \item[\ref{def:group_properties/identity_inverse}] $ee = e$.
    \item[\ref{def:group_properties/inverse_composition}]
    \begin{align*}
      (ab) (b^{-1} a^{-1})
      =
      a (b b^{-1}) a^{-1}
      =
      e
      =
      b^{-1} (a^{-1} a) b
      =
      (b^{-1} a^{-1}) (ab).
    \end{align*}

    \item[\ref{def:group_properties/double_inverse}]
    \begin{align*}
      (a^{-1})^{-1}
      =
      a a^{-1} (a^{-1})^{-1}
      =
      a.
    \end{align*}

    \item[\ref{def:group_properties/negative_power}] Using~\ref{def:group_properties/double_inverse},
    \begin{align*}
      a^{-n}
      =
      (a^n)^{-1}
      =
      a^{-1} \cdots a^{-1}
      =
      (a^{-1})^n.
    \end{align*}

    \item[\ref{def:group_properties/cancellation}] If $a = b$, obviously $ac = bc$ and $ca = cb$. Now if $ac = bc$, we have
    \begin{align*}
      a = acc^{-1} = bcc^{-1} = b.
    \end{align*}

    The case $ca = bc$ is analogous.
  \end{itemize}
\end{proof}

\begin{definition}\label{def:groupoid}
  A \uline{groupoid} is a category\Tinyref{def:category} in which the only morphisms are isomorphisms\Tinyref{def:morphism_invertibility}.
\end{definition}

\begin{definition}\label{note:groupoids}
  Let $\Bold G$ be a locally small with a single object $g$. Then the endomorphisms of $g$ form a monoid\Tinyref{def:group} under composition and the subcategory of $\Bold G$ in which all morphisms are isomorphisms forms a group\Tinyref{def:group}. Thus, if $\Bold G$ is a locally small groupoid with a single object $g$, then the endomorphisms of $g$ are automorphisms and, thus, they form a group under composition.
\end{definition}

\begin{definition}\label{def:group_cosets}
  Let $H \subseteq G$ be a subgroup of $G$ and let $a \in G$. Consider the sets
  \begin{align*}
    aH \coloneqq \{ ah \colon h \in H \}
    &&
    Ha \coloneqq \{ ha \colon h \in H \}
  \end{align*}
  called the \uline{left and right cosets of $H$ with respect to $a$}.
\end{definition}

\begin{proposition}\label{thm:coset_partition}
  The left (resp. right) cosets of a subgroup $H$ of $G$ partition\Tinyref{def:set_partition} $G$.
\end{proposition}
\begin{proof}
  To each element $a \in G$ there corresponds a coset $a \in aH$ (since $H$ contains the identity as a subgroup).

  Two cosets $aH$ and $bH$ are either disjoint or equal. Indeed, if they are not disjoint, then there exists $g \in aH \cap bH$ and thus $g = ax = by$ for some $x, y \in H$. Thus $a = a x x^{-1} = b y x^{-1}$ and since $y x^{-1} \in H$, we have that $a \in bH$. Furthermore, for any $z \in H$, we have $az = b(y x^{-1} z) \in bH$, hence $aH \subseteq bH$. After obtaining the converse inclusion, we conclude $aH = bH$.
\end{proof}

\begin{definition}\label{def:magma_homomorphism}
  Let $M$ and $N$ be magmas. We say that the function $f: M \to N$ is a \uline{magma homomorphism (resp. semigroup, monoid or group homomorphism)} if it is \uline{compatible with the magma structure on $M$ and $N$}, that is,
  \begin{description}
    \DItem{Compatibility}{def:magma_homomorphism/compatibility} $f(ab) = f(a) f(b)$ for all $a, b \in M$.
  \end{description}

  If $M$ and $N$ are monoids, the \uline{kernel} of $f$ is defined as the preimage\Tinyref{def:function_invertibility} $f^{-1}(e)$ of the identity $e_N$.

  The terminology from~\cref{def:morphism_invertibility} applies to group homomorphisms because of the category $\Bold{Grp}$ of groups.
\end{definition}

\begin{proposition}\label{thm:group_homomorphism_properties}
  Any group homomorphism $f: G \to K$ has the following basic properties:
  \begin{defenum}
    \item\label{def:group_homomorphism_properties/preserves_identity} $f$ preserves the identity, that is, $f(e_G) = e_K$ (also holds for monoids).
    \item\label{def:group_homomorphism_properties/preserves_inverses} $f$ preserves inverses, that is, $f(a^{-1}) = f(a)^{-1}$ for any $a \in G$.
    \item\label{def:group_homomorphism_properties/preserves_subgroup} If $H$ is a subgroup of $G$, its image $f(H)$ is a subgroup of $K$ (holds for any submagma).
    \item\label{def:group_homomorphism_properties/kernel_is_subgroup} The kernel $\Ker(f)$ is a subgroup of $G$.
  \end{defenum}
\end{proposition}
\begin{proof}\mbox{}
  \begin{itemize}
    \item[\ref{def:group_homomorphism_properties/preserves_identity}] We have
    \begin{align*}
      e_K f(e_G) = f(e_G e_G) = f(e_G) f(e_G).
    \end{align*}

    Cancelling on the right, we obtain
    \begin{align*}
      e_K = f(e_G).
    \end{align*}

    \item[\ref{def:group_homomorphism_properties/preserves_inverses}]
    \begin{align*}
      f(a^{-1})
      =
      f(a^{-1}) e_K
      =
      f(a^{-1}) f(a) f(a)^{-1}
      =
      f(a^{-1} a) f(a)^{-1}
      =
      f(a)^{-1}.
    \end{align*}

    \item[\ref{def:group_homomorphism_properties/preserves_subgroup}] If $a, b \in G$, then
    \begin{align*}
      f(a) f(b) = f(ab) \in f(G),
    \end{align*}
    thus $f(G)$ is closed under the group operation in $K$.

    \item[\ref{def:group_homomorphism_properties/kernel_is_subgroup}] If $a, b \in \Ker(f)$, then
    \begin{align*}
      f(ab) = f(a) f(b) = e_K e_k = e_k.
    \end{align*}

    Thus $ab \in \Ker(f)$ and $\Ker(f)$ is closed under the group operation.
  \end{itemize}
\end{proof}

\begin{definition}\label{def:normal_subgroup}
  Let $N$ be a subgroup of $G$. We say that $N$ is a normal subgroup and write $N \unlhd G$ if any of the following equivalent conditions hold:
  \begin{defenum}
    \item\label{def:normal_subgroup/direct} For any $a \in G$, we have the set equality $a N a^{-1} = N$.
    \item\label{def:normal_subgroup/cosets} The partitions induced by the left and rights cosets of $N$ coincide ($aN = Na$) and form the \uline{quotient group $G / N$}.
    \item\label{def:normal_subgroup/kernel} $N$ is the kernel\Tinyref{def:magma_homomorphism} of some group homomorphism (in particular, kernels are always normal subgroups).
  \end{defenum}
\end{definition}
\begin{proof}
  This is the group-theoretic analog to~\cref{thm:equivalence_partition}.

  (\ref{def:normal_subgroup/direct} $\implies$ \ref{def:normal_subgroup/cosets}) For any $a \in G$
  \begin{align*}
    Na = (aNa^{-1})a = aN(a^{-1}a) = aN,
  \end{align*}
  thus every left coset is a right coset and vice versa.

  (\ref{def:normal_subgroup/cosets} $\implies$ \ref{def:normal_subgroup/kernel}) Denote by $G / N$ the family of all cosets of $N$. Then $G / N$ is itself a group with the inherited from $G$ group structure
  \begin{itemize}
    \item $aN \cdot bN \coloneqq (ab)N$
    \item $N = eN$ is an identity element of $P$
    \item $a^{-1} N$ is the inverse of $aN$
  \end{itemize}

  Since it is possible for two elements $a, x \in G$ to have the same coset $aN = xN$, the group operation in $G / N$ depends on the choice of representatives for each coset. In order for the operation to be well-defined, we need to make sure that the result does not depend on the choice of representatives. This happens to be true if and only if the subgroup $N$ is normal.

  Indeed, let $aN = xN$ and $bN = yN$. If $N$ is normal (in the sense of~\ref{def:normal_subgroup/cosets}), we have
  \begin{align*}
    (ab)N = a(yN) = a(Ny) = (aN)y = x(Ny) = (xy)N.
  \end{align*}

  Conversely, if the operation is well defined, then for any $g \in N$
  \begin{align*}
    N = a^{-1} a N = (a^{-1} N) (a N) = (a^{-1} N) N (a N) = (a^{-1} N) (g N) (a N) = (a^{-1} g a) N.
  \end{align*}

  Hence $a^{-1} g a \in N$ and $a^{-1} N a \subseteq N$. Thus
  \begin{align*}
    &Na = (a a^{-1} N)a = (aN) (a^{-1} N a) \subseteq (aN) N = aN,
    \\
    &aN = a(N a^{-1} a) = (a N a^{-1}) a \subseteq Na.
  \end{align*}

  Now define the homomorphism
  \begin{align*}
    &\varphi: G \to G / N \\
    &\varphi(a) = aN
  \end{align*}

  The preimage of the coset $N$ consists of $N$ itself. Since $N$ (as an element of $G / N$) is the identity of $G / N$, we conclude that $N$ (as a subset of $G$) is the kernel of $\varphi$.

  (\ref{def:normal_subgroup/kernel} $\implies$ \ref{def:normal_subgroup/direct}) Let $f: G \to K$ be a group homomorphism and fix any $a \in G$. Denote $N \coloneqq \Ker(f)$. Then $aN = Na$ since
  \begin{align*}
    f(aN)
    =
    f(a) f(N)
    =
    f(a) f(e_G)
    =
    f(a)
    =
    f(N) f(a)
    =
    f(Na).
  \end{align*}

  Thus
  \begin{align*}
    N = aa^{-1}N = aNa^{-1}.
  \end{align*}
\end{proof}

\begin{proposition}\label{thm:abelian_normal_subgroups}
  All subgroups of an abelian group are normal.
\end{proposition}
\begin{proof}
  Let $G$ be abelian and $H$ be a subgroup of $G$. Then $aGa^{-1} = aa^{-1}H = H$ for any $a \in G$ and thus $H$ is normal.
\end{proof}

\begin{definition}\label{def:free_monoid}\cite[306]{Knapp2016BAlg}
  Let $A$ be an arbitrary set. We associate with $A$ its \uline{free monoid} $FM(A) \coloneqq (\Cal{A}^{*}, \cdot)$\Tinyref{def:language}. It is a monoid due to~\cref{thm:set_of_all_words_is_monoid}. In category-theoretic terms, we define a functor\Tinyref{def:functor} $FM: \Bold{Set} \to \Bold{Mon}$ that is left-adjoint\Tinyref{def:adjoint_functor} to the corresponding forgetful functor.
\end{definition}

\begin{definition}\label{def:free_group}\cite[306]{Knapp2016BAlg}
  Let $A$ be an arbitrary set. We associate with $A$ a \uline{free group} $F(A)$. As in\cref{def:free_monoid}, $F(S)$ is left-adjoint to the corresponding forgetful functor.

  First, regard $A$ as an alphabet\Tinyref{def:language} and define the set $A^{-1}$ of words of the type $a^{-1}$, where $a \in A$ and $\mbox{}^{-1}$ is a symbol not in $A$. Consider the language $W(A) \coloneqq (A \cup A^{-1})^{*}$. By \cref{thm:set_of_all_words_is_monoid}, $W(A)$ is a monoid. It is not a group, however, since $w w^{-1} \neq \varepsilon$. This is why we define a different group operation on the set of \uline{cyclically reduced words $F(A)$ of $W(A)$}.

  Denote by $B(A)$ all words in $W(A)$ of the form $aa^{-1}$ or $a^{-1}a$. If a word $w \in W(A)$ contains no subwords from $B(A)$, we say that $w$ is \uline{reduced}. If $w$ is reduced and the first and last symbol in $w$ are not inverses of each other, we say that $w$ is \uline{cyclically reduced}. If $w = a_1 \ldots a_n$ is a word, its inverse word is
  \begin{align*}
    w^{-1} \coloneqq a_n^{-1} \ldots a_1^{-1}.
  \end{align*}

  We define the \uline{reduction function}
  \begin{align*}
    &r: W(A) \to F(A) \\
    &r(w) \coloneqq \begin{cases}
      w, &w \text{ is cyclically reduced}, \\
      r(ps), &w = pvs, v \in B(A), \text{i.e. $w$ is not reduced}, \\
      r(v), &w = ava^{-1} \text{ or } w = a^{-1}va, \text{i.e. $w$ is not cyclically reduced}.
    \end{cases}
  \end{align*}

  The cyclically reduced words $F(A)$ form a group under the operation
  \begin{align*}
    u \cdot_{F(A)} w \coloneqq R(u \cdot_{W(A)} w).
  \end{align*}

  The group $(F(A), \cdot_{F(A)})$ is called the \uline{free group generated by $A$}.
\end{definition}
