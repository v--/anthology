\section{Nonsmooth analysis}\label{sec:nonsmooth_analysis}
\subsection{Differentiability}\label{subsec:differentiability}

Let \( X \) and \( Y \) be Hausdorff topological vector spaces\Tinyref{def:topological_vector_space}, let \( D \subseteq X \) be open and let \( D: X \to Y \) be any function.

\begin{definition}\label{def:derivatives}
  We fix a point \( x \in D \) and a direction \( h \in S_X \). We introduce a few definitions of derivatives. In all cases we say that \Def{the derivative (of the corresponding type) exists for \( f \) at \( x \) in the direction \( h \)}. The quotient under the limit sign is called a \Def{difference quotient} (of the corresponding type).

  \begin{defenum}
    \DItem{def:derivatives/classical} The classical \Def{two-sided derivative} is defined as
    \begin{equation*}
      f'(x)(h) \coloneqq \lim_{t \to 0} \frac {f(x + th) - f(x)} t
    \end{equation*}

    This definition is often too strict and so there exist a few generalizations.

    \DItem{def:derivatives/onesided}\cite[lemma 1.2]{Phelps1993} The \Def{one-sided (or right-hand) directional derivative} is defined as
    \begin{equation*}
      f_+'(x)(h) \coloneqq \lim_{t \downarrow 0} \frac {f(x + th) - f(x)} t
    \end{equation*}

    It is also denoted as \( \partial^+ f(x)(h) \) in \cite[lemma 1.2]{Phelps1993}. We do not need to define a left-hand directional derivative because it would equal \( -f_+'(x)(-h) \).

    \DItem{def:derivatives/dini}\cite[definition 11.18]{Clarke2013} The \Def{upper (resp. lower) Dini derivative} is defined as
    \begin{align*}
      \overline f'(x)(h) &\coloneqq \limsup_{t \downarrow 0} \frac {f(x + th) - f(x)} t
      \\
      \underline f(x)(h) &\coloneqq \liminf_{t \downarrow 0} \frac {f(x + th) - f(x)} t
    \end{align*}

    Dini derivatives are useful when the difference quotients are bounded but do not have a limit.

    \DItem{def:derivatives/clarke}\cite[section 10.1]{Clarke2013} The \Def{generalized Clarke derivative} is defined as
    \begin{align*}
      f^\circ(x)(h)
      &\coloneqq
      \limsup_{\substack{y \to x \\ t \downarrow 0}} \frac {f(y + th) - f(y)} t
      =
      \lim_{\delta \to 0} \sup_{\substack{y \in B(x, \delta) \\ t \in (0, \delta)}} \frac {f(y + th) - f(y)} t.
    \end{align*}

    Refer to \cref{subsec:clarke_gradients} for their usefulness.
  \end{defenum}
\end{definition}

\begin{definition}\label{def:differentiability}
  We fix a point \( x \in D \). We will now introduce several types of differentiability. Each is implied by the next one.

  \begin{defenum}
    \item We do not introduce a special name for functions that have a one-sided derivative at \( x \) in the direction \( h \), although some authors call these functions \Def{Gateaux differentiable at \( x \) in the direction \( h \)}. % TODO: Give examples of such authors

    \DItem{def:differentiability/two-sided}\cite[0.2.1]{Ioffe1974} If the two-sided directional derivative \( f'(x)(h) \) exists for all directions \( h \in S_X \), we call it the \Def{first variation at \( x \)} and denote the corresponding linear operator \( \delta f(x): X \to Y \).

    \DItem{def:differentiability/gateaux}\cite[definition 1.12]{Phelps1993} Let \( X \) be a Banach space. We say that \( f \) is Gateaux-differentiable at \( x \) if there exists a continuous linear operator \( f'_G(x): X \to Y \), called the Gateaux derivative of \( f \) at \( x \), such that
    \begin{equation*}
      f'_G(x)(h) = \lim_{t \to 0} \frac {f(x + th) - f(x)} t.
    \end{equation*}

    The Gateaux derivative \( f'_G(x) \) exists precisely when the first variation \( \delta f(x) \) operator exists and is continuous. They are obviously equal.

    The Gateaux derivative is also denoted by \( df(x) \) in \cite[definition 1.12]{Phelps1993}.

    \DItem{def:differentiability/frechet}\cite[definition 1.12]{Phelps1993} Let \( X \) be a Banach space. We say that \( f \) is Frechet-differentiable at \( x \) if there exists a continuous linear operator \( f'(x): X \to Y \), called the Frechet derivative of \( f \) at \( x \), such that for each \( \varepsilon > 0 \) there exists a radius \( \delta > 0 \) such that and for every direction \( h \in S_X \) we have
    \begin{equation*}
      t \in (0, \delta) \implies \Norm{ \frac {f(x + th) - f(x)} t - f'(x)(h)} < \varepsilon.
    \end{equation*}

    Note that for each \( \varepsilon > 0 \), Gateaux differentiability gives us a radius \( \delta_h > 0 \) such that
    \begin{equation*}
      t \in (0, \delta_h) \implies \Norm{ \frac {f(x + th) - f(x)} t - f_G'(x)(h)} < \varepsilon.
    \end{equation*}

    If the limit is uniform over \( h \in S_X \), i.e. if \( \sup_{h \in S_X} \delta_h < \infty \), then \( f \) is Frechet differentiable at \( x \) and \( f'(x) = f'_G(x) \).

    \DItem{def:differentiability/strong}\cite[33]{Dontchev2014} We say that \Def{\( f \) is strictly differentiable at \( x \)} if there exists a continuous linear operator \( f'(x): X \to Y \) such that
    \begin{equation*}
      \lim_{\substack{y \to x \\ z \to x}} \frac{f(y) - f(z) - f'(x)(y - z)} {\Norm{y - z}} = 0.
    \end{equation*}
  \end{defenum}
\end{definition}

\begin{example}[Weierstrass' nowhere differentiable function]\label{ex:weierstrass_nowhere_differentiable_function}
  Let $a \in (0, 1)$ and $b$ is a positive odd integer such that
  \begin{align*}
    ab > 1 + \frac 3 2 \pi.
  \end{align*}

  Define the function
  \begin{align*}
    f(x) \coloneqq \sum_{k=0}^\infty a^k \cos(b^n \pi x).
  \end{align*}

  It is everywhere continuous and nowhere differentiable.

  \begin{figure}\label{ex:weierstrass_nowhere_differentiable_function/plot}
    \centering
    \begin{mplibcode}
      input metapost/plotting;
      u := 3cm;

      a := 0.9;
      b := 7;
      n := 4;

      vardef f_k(expr x, k) =
        pow(a, k) * cosd(pow(b, k) * pi * x)
      enddef;

      vardef f(expr x) =
        result := 0;

        for k = 1 upto n:
          result := result + f_k(x, k);
        endfor

        result / 2 % scale by 0.5 for the sake of visualization
      enddef;

      beginfig(2)
        drawarrow (-pi / 2, 0) scaled u -- (pi / 2, 0) scaled u;
        drawarrow (0, -pi / 10) scaled u -- (0, pi / 2) scaled u;

        draw path_of_plot(f, -pi / 2, pi / 2, 0.01, u);
      endfig;
    \end{mplibcode}
    \caption{Plot of the 4-th partial sum of the Weierstrass function with $a = 0.9$ and $b = 7$ from $-\pi$ to $\pi$.}
  \end{figure}
\end{example}
