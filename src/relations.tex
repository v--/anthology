\section{Relations}\label{sec:relations}

\begin{definition}\label{def:relation}
  Let $\{ X_i \}_{i \in I}$ be a family of nonempty sets.
  Subsets of the form
  \begin{align*}
    \sim\; \subseteq \times_{i \in I} X_i
  \end{align*}
  are called \ul{relations}. If $I$ is a finite set of cardinality $n$\Tinyref{note:cardinals}, the relation is called \ul{n-ary (binary for $n = 2$, ternary for $n = 3$)}. If all $X_i$ are the same set, we say that \ul{$\sim$ is relation on X}.

  It is customary to write binary relations as $a \sim b$ instead of $(a, b) \in \sim$.
\end{definition}

\begin{definition}\label{def:orders}
  We will consider binary relations $\sim\; \subseteq X \times X$ on a nonempty set $X$.

  \begin{defenum}
    \item\label{def:order/strict_partial} The relation $<$ is called a \ul{strict partial order} if
    \begin{description}
      \DItem{antireflexivity}{def:order/strict_partial/antireflexivity} $\lnot(a < a)$
      \DItem{transitivity}{def:order/strict_partial/transitivity} $a < b \land b < c \implies a < c$
    \end{description}

    The binary relation $>$ is defined as $a > b \iff b < a$. Strict partial orders are rarely used compared to nonstrict partial orders (\cref{def:order/partial}).

    If any two elements are in a relation, we call the strict partial order a \ul{strict total order} or a \ul{strict linear order}.

    \item\label{def:order/preorder} The relation $\sim$ is called a \ul{preorder} if:
    \begin{description}
      \DItem{reflexivity}{def:order/preorder/reflexivity} $a \sim a$
      \DItem{transitivity}{def:order/preorder/transitivity} $a \sim b \land b \sim c \implies a \sim c$
    \end{description}

    The pair $(X, \sim)$ is said to be a \ul{preordered set}.

    \item\label{def:order/equivalence} The preorder $\cong$ is called an \ul{equivalence relation} if is is symmetric, i.e.
    \begin{description}
      \DItem{reflexivity}{def:order/equivalence/reflexivity} $a \cong a$
      \DItem{symmetry}{def:order/equivalence/symmetry} $a \cong b \implies b \cong a$
      \DItem{transitivity}{def:order/equivalence/transitivity} $a \cong b \land b \cong c \implies a \cong c$
    \end{description}

    We define \ul{equivalence classes} to be sets of the form
    \begin{align*}
      [a] \coloneqq \{ b \in X \colon a \cong b \}.
    \end{align*}
    and the \ul{quotient set} of $X$ by $\cong$ to be the family
    \begin{align*}
      X / \cong \coloneqq \{ [a] \colon a \in X \}.
    \end{align*}

    We call the function
    \begin{align*}
      &\pi: X \to X / \cong \\
      &\pi(a) \coloneqq [a].
    \end{align*}
    the canonical projection. See~\cref{thm:equivalence_partition}.

    \item\label{def:order/partial} Assuming we have defined a notion of equality in our formal language\Tinyref{def:first_order_language}, the preorder $\leq$ is called a \ul{(nonstrict) partial order} if it is antisymmetric, i.e.
    \begin{description}
      \DItem{reflexivity}{def:order/partial/reflexivity} $a \leq a$
      \DItem{antisymmetry}{def:order/partial/antisymmetry} $a \leq b \land b \leq a \implies a = b$
      \DItem{transitivity}{def:order/partial/transitivity} $a \leq b \land b \leq c \implies a \leq c$
    \end{description}

    A set with a partial order is called a~\ul{partially ordered set or poset}. See~\cref{def:poset}.

    \item\label{def:order/directed} A preordered set\Tinyref{def:order/preorder} $(X, \leq)$ is called a \ul{directed set} (there is no ubiquitous name for the relation itself) if every two elements have an upper bound\Tinyref{def:poset/upper_lower_bound}, i.e.
    \begin{description}
      \DItem{reflexivity}{def:order/directed/reflexivity} $a \leq a$
      \DItem{transitivity}{def:order/directed/transitivity} $a \leq b \land b \leq c \implies a \leq c$
      \DItem{upper bound}{def:order/directed/upper_bound} $\forall a, b \in X \exists c: a \leq c \land b \leq c$
    \end{description}

    Since the set of all upper bounds of $\{ a, b \}$ may not have a least element\Tinyref{def:poset/greatest_least_element}, the upper bound condition is weaker than every two-element set having a supremum.

    Directed sets are used to define convergence in topological spaces, see \cref{sec:convergence}.
  \end{defenum}
\end{definition}

\begin{note}\label{note:equality_equivalence_relation}
  Equality is a concept that implies that two objects are completely indistinguishable. An example of a formal definition of equality is \cref{def:set_zfc/A1}. Sometimes equality is meaningless in a certain context, in which case we speak of a language without an equality symbol\Tinyref{def:first_order_language}. When restricted to a set $X$, it is an equivalence relation\Tinyref{def:order/equivalence}. Furthermore, it is the intersection of all equivalence relations on $X$.
\end{note}

\begin{definition}\label{def:set_partition}
  Let $X$ be a set. A \ul{partition of $X$} is a disjoint family\Tinyref{note:family_of_sets} $P \subseteq \Power(X)$ of nonempty sets such that $X = \bigcup P$. In other words, each element of $X$ belong to exactly one set in $P$.
\end{definition}

\begin{proposition}\label{thm:equivalence_partition}
  Fix a set $X$. The following three constructions are equivalent:
  \begin{defenum}
    \item\label{thm:equivalence_partition/partition} A partition\Tinyref{def:set_partition} $P$ of $X$
    \item\label{thm:equivalence_partition/equivalence} An equivalence relation\Tinyref{def:order/equivalence} $\cong$ on $X$
    \item\label{thm:equivalence_partition/function} A function $f: X \to Y$ (where $Y$ is arbitrary)
  \end{defenum}
\end{proposition}
\begin{proof}
  (\ref{thm:equivalence_partition/equivalence} $\implies$ \ref{thm:equivalence_partition/partition}) Let $\cong$ be an equivalence relation on $X$. The quotient set $X / \cong$ is a partition since
  \begin{itemize}
    \item Every element $a \in X$ belongs to the equivalence class $[a]$.
    \item Let $[a] \cap [b] \neq \varnothing$ and $c \in [a] \cap [b]$. Assume\LEM that $a \not\cong b$. Then $c \cong a$ and $c \cong b$, thus $a \cong c \cong b$ and $a \cong b$, which is a contradiction. Thus either $[a] = [b]$ or $[a] \cap [b] = \varnothing$.
  \end{itemize}

  (\ref{thm:equivalence_partition/partition} $\implies$ \ref{thm:equivalence_partition/function}) Let $P$ be a partition of $X$. Denote by $P_x$ the set in $P$ which contains $x$ and define the function
  \begin{align*}
    &f: X \to P \\
    &f(x) = P_x.
  \end{align*}

  This function is well defined since since all sets in $P$ are disjoint and thus $x$ belongs to exactly one set in $P$.

  (\ref{thm:equivalence_partition/function} $\implies$ \ref{thm:equivalence_partition/equivalence}) Let $f: X \to Y$ be a function. Define the relation
  \begin{align*}
    a \cong b \iff f(a) = f(b).
  \end{align*}

  It is an equivalence relation since it is induced by the equivalence relation $=$\Tinyref{note:equality_equivalence_relation}.
\end{proof}

\begin{definition}\label{def:derived_relations}
  Let $\sim$ be a binary relation on $X$. Define
  \begin{defenum}
    \item\label{def:derived_relations/converse} the \ul{converse of $\sim$} as
    \begin{align*}
      (\sim)^{-1} \coloneqq \sim \cup \{ (y, x) \colon (x, y) \in \sim \}.
    \end{align*}

    \item\label{def:derived_relations/reflexive} the \ul{reflexive closure of $\sim$} as
    \begin{align*}
      (\sim)^R \coloneqq \sim \cup \{ (x, x) \colon x \in X \}.
    \end{align*}

    \item\label{def:derived_relations/symmetric} the \ul{symmetric closure of $\sim$} as
    \begin{align*}
      (\sim)^S \coloneqq \sim \cup \sim^{-1}.
    \end{align*}

    \item\label{def:derived_relations/transitive} the \ul{transitive closure of $\sim$} as
    \begin{align*}
      (\sim)^T \coloneqq \bigcap \{ \approx \colon \approx \text{ is a binary transitive relation on $X$ such that} \sim \subseteq \approx \}.
    \end{align*}
  \end{defenum}
\end{definition}
\begin{proof}
\begin{itemize}
  Let $(\sim)$ be an arbitrary binary relation on $X$.

  \begin{description}
    \item[\ref{def:derived_relations/reflexive}] The reflexive closure of $\sim$ is reflexive since it contains the diagonal relation $\{ (x, x) \colon x \in X \}$.

    \item[\ref{def:derived_relations/symmetric}] The symmetric closure of $\sim$ is symmetric since $x \;(\sim)^S y \iff y \;(\sim)^S x$.

    \item[\ref{def:derived_relations/transitive}] The transitive closure of $\sim$ is transitive as an intersection of transitive relations.
  \end{description}
\end{itemize}
\end{proof}

\begin{proposition}\label{thm:preorder_to_partial_order}
  Let $(X, \sim)$ be a preordered set. Use the symmetric closure to define the equivalence relation
  \begin{align*}
    \cong \coloneqq (\sim)^S.
  \end{align*}

  The quotient set $X / \sim$ along with the induced relation
  \begin{align*}
    [x] \leq [y] \iff x \sim y
  \end{align*}
  is then a partially ordered set\Tinyref{def:order/partial}.
\end{proposition}
