\section{Set theory}\label{sec:set_theory}
\subsection{Sets}\label{subsec:sets}

\begin{definition}\label{def:set_naive}\cite[chapter 1]{Enderton1977}
  Naive set theory is not based on a strict axiom set but rather on the intuitive notion of a set as an unordered collection without repetition. Set equality \( A = B \), set membership \( x \in A \) and set inclusion \( A \subseteq B \) are assumed to be understood. Sets can be explicitly constructed by specifying their elements, e.g.
  \begin{equation*}
    \{ 3, 7, 31, 127, 8191 \}
  \end{equation*}
  or by specifying a logical formula \( \varphi(x) \) in an implicitly assumed logical language:
  \begin{equation*}
    \{ x \colon \varphi(x) \}
  \end{equation*}

  If \( \varphi(x) = x \in A \land \psi(x) \), we often write
  \begin{equation*}
    \{ x \in A \colon \psi(x) \}.
  \end{equation*}

  In a suitable context, the definitions can be made precise. For example, in the ring of integers \( \BZ \) with equality, addition, multiplication and predicates partial ordering \( \leq \) and divisibility \( \vert \), each set can be thought of a formula in the corresponding first-order logic language\Tinyref{def:first_order_logic_language}. Given formulas \( \varphi_A \) and \( \varphi_B \) with a free variable \( x \) and sets
  \begin{align*}
    A \coloneqq \{ x \colon \varphi_A(x) \} && B \coloneqq \{ x \colon \varphi_B(x) \}
  \end{align*}

  \begin{itemize}
    \item the membership relation \( x \in A \) holds precisely when \( \BZ \models \varphi_A(x) \).

    \item the inclusion relation \( A \subseteq B \) holds when for any evaluation\Tinyref{def:first_order_variable_assignment} \( v \) in \( \BZ \) and any integer \( x \), we have \( \varphi_A(x) \implies \varphi_B(x) \).

    \item set equality \( A = B \) holds precisely when \( A \subseteq B \) and \( B \subseteq A \)
  \end{itemize}

  Naive set theory easily leads to paradoxes\Tinyref{ex:russels_paradox_sets}) and so some axiomatization (e.g. \cref{def:set_zfc}) is required.
\end{definition}

\begin{example}\label{ex:russels_paradox_sets}
  Define
  \begin{equation*}
    R \coloneqq \{ x \colon x \neq x \}.
  \end{equation*}

  We have both \( R \in R \) and \( R \not\in R \).
\end{example}

\begin{definition}\label{def:set_zfc}\cite[271]{Enderton1977}
  In contrast to na\"ive set theory\Tinyref{def:set_naive}), \Def{Z}ermelo â€“ \Def{F}raenkel set theory with the axiom of choice (ZF\Def{C}) can be made precise. Consider the first-order logic language\Tinyref{def:first_order_logic_language} with equality \( = \), no functional symbols and a single binary predicate \( \in \). Note that we can take the language not to have formal equality and then use \cref{def:set_zfc/A1} as an axiom schema to define equality in terms of \( \in \).

  Given a formula \( \varphi(x_1, \ldots, x_n) \), we can construct a (syntactic) object
  \begin{equation*}
    A = \{ a_1, \ldots, a_n \colon \varphi(a_1, \ldots, a_n) \}
  \end{equation*}
  that we call a \Def{class}. Not all classes can be defined to have meaningful semantics (e.g. the class of all classes easily leads to paradoxes like \cref{ex:russels_paradox_sets}). We define sets in ZFC as classes with semantics given by a model for the following axioms (exclude~\ref{def:set_zfc/A8} to obtain ZF). Classes that do not satisfy these axioms are called \Def{proper classes} and are often said to be \Def{too big} to be sets, e.g. the class of all sets or the class of all vector spaces).

  \begin{description}
    \DItem{def:set_zfc/A1}[A1](extensionality) Two sets are equal if they have the same elements (given by set membership)

    \DItem{def:set_zfc/A2}[A2](empty set) The following class is a set
    \begin{equation*}
      \varnothing \coloneqq \{ x \colon x \neq x \}.
    \end{equation*}

    \DItem{def:set_zfc/A3}[A3](pairing) If \( A \) and \( B \) are sets, then
    \begin{equation*}
      \{ A, B \}
    \end{equation*}
    is also a set. In particular, \( \{ A \} = \{ A, A \} \) is a set.

    \DItem{def:set_zfc/A4}[A4](union) If \( A \) is a set, then \( \bigcup A \)\Tinyref{def:set_union} is also a set.

    \DItem{def:set_zfc/A5}[A5](power set) If \( A \) is a set, \( \Power(A) \)\Tinyref{def:power_set} is also a set.

    \DItem{def:set_zfc/A6}[A6](specification) If \( A \) is a set and \( \varphi \) is a formula, then
    \begin{equation*}
      \{ x \in A \colon \varphi(x) \}
    \end{equation*}
    is a set.

    \DItem{def:set_zfc/A7}[A7](infinity) There exists an inductive set\Tinyref{def:inductive_set}.

    \DItem{def:set_zfc/A8}[A8](choice; see \cref{thm:aoc}) Let \( J \neq 0 \) and for all \( j \in J \), let \( X_j \) be a nonempty set and \( X_i \cap X_j = \varnothing \) when \( i \neq j \). Then there exists a set \( M \) such that for every \( j \in J \), the intersection \( M \cap X_j \)\Tinyref{def:set_intersection} has exactly one member.

    \DItem{def:set_zfc/A9}[A9](replacement) Given a set \( X \) and a formula \( \varphi(x, y) \), if for every set \( x \in X \) there exists a unique set \( y \) such that \( \varphi(x, y) \) holds, then
    \begin{equation*}
      Y \coloneqq \{ y \colon \exists x \in X, \varphi(x, y) \}
    \end{equation*}
    is a set.

    \DItem{def:set_zfc/A10}[A10](regularity) For every nonempty set \( A \), there exists a member \( a \in A \) such that
    \begin{equation*}
      a \cap A \neq \varnothing.
    \end{equation*}
  \end{description}
\end{definition}

\begin{remark}\label{remark:family_of_sets}
  In ZFC \cref{def:set_zfc}, everything is a set. However, it is often the case that we are not interested in how a set's elements are represented and only in how they behave, e.g. when working with natural numbers\Tinyref{def:natural_numbers} we are interested in the elements of \( \BN \) and not in the way every element of \( \BN \) is encoded as a set.

  In order to reduce repetitiveness, sets whose elements we consider to be other sets, are often called \Def{families of sets}. In particular if all (different) sets are disjoint\Tinyref{def:set_intersection}, we say that the family is a \Def{disjoint family}. We usually assume that the sets are nonempty.
\end{remark}

\begin{remark}\label{remark:singleton_sets}
  Sets with a single elements are usually called \Def{singletons}. It is sometimes convenient, especially with connection to geometry or multivalued functions\Tinyref{def:function/multivalued} (e.g. when dealing with limits\Tinyref{def:topological_net_convergence/limit} or subdifferentials\Tinyref{def:subdifferentials}), to not distinguish between singleton sets and their corresponding element.
\end{remark}

\begin{definition}\label{def:subset}
  We say that \( A \) is a \Def{subset} of \( B \) and write \( A \subseteq B \) if \( x \in A \implies x \in B \). If \( A \) is a subset of \( B \), we say that B is a \Def{superset} of \( A \).

  If \( A \subseteq B \) and \( A \neq B \), we say that \( A \) is a \Def{proper subset} of \( B \) and write \( A \subsetneq B \).
\end{definition}

\begin{remark}\label{remark:subset_notation}
  Some authors, such as \cite{Kelley1955}, use the notation \( A \subseteq B \) to mean \enquote{all elements of \( A \) belong to \( B \)}, even in the case when \( A = B \). To avoid confusion, we use the notations \( A \subseteq B \) and \( A \subsetneq B \) (see \cref{def:subset}).
\end{remark}

\begin{remark}\label{remark:subset_and_membership_relations}
  Both \( \in \) and \( \subseteq \) are binary relations\Tinyref{def:relation}, called the \Def{membership} and \Def{inclusion} relations, correspondingly.
\end{remark}

\begin{definition}\label{def:set_intersection}\cite[24]{Enderton1977}
  If \( A \) is a set, define their \Def{intersection} as
  \begin{equation*}
    \bigcap A \coloneqq \{ x \colon \forall a \in A, x \in a \}.
  \end{equation*}

  We leave \( \bigcap \varnothing \) undefined.

  By~\ref{def:set_zfc/A6}, \( \bigcap A \) is a set.

  For two sets \( A \) and \( B \), we define the \Def{binary intersection} as
  \begin{equation*}
    A \cup B \coloneqq \bigcap \{ A, B \} = \{ x \colon x \in A \land x \in B \}.
  \end{equation*}

  The class \( \{ A, B \} \) is a set by~\ref{def:set_zfc/A3} and \( A \cup B \) is a set by~\ref{def:set_zfc/A6}.

  If \( A \cap B = \varnothing \), we say that \( A \) and \( B \) are \Def{disjoint}. If they are not disjoint, we say that they \Def{intersect}.
\end{definition}

\begin{definition}\label{def:set_union}\cite[24]{Enderton1977}
  If \( A \) is a set, define its \Def{union} as
  \begin{equation*}
    \bigcup A \coloneqq \{ x \colon \exists a \in A, x \in A \}.
  \end{equation*}

  In particular, \( \bigcup \varnothing = \varnothing \).

  By~\ref{def:set_zfc/A4}, \( \bigcup A \) is a set.

  For two sets \( A \) and \( B \), we define the \Def{binary union} as
  \begin{equation*}
    A \cup B \coloneqq \bigcup \{ A, B \} = \{ x \colon x \in A \lor x \in B \}.
  \end{equation*}

  The class \( \{ A, B \} \) is a set by~\ref{def:set_zfc/A3} and \( A \cup B \) is a set by~\ref{def:set_zfc/A4}.
\end{definition}

\begin{definition}\label{def:set_difference}\cite[27]{Enderton1977}
  If \( A \) and \( B \) are sets, define their \Def{difference} as
  \begin{equation*}
    A \setminus B \coloneqq \{ a \in A \colon a \not\in B \}.
  \end{equation*}

  By~\ref{def:set_zfc/A6}, \( A \setminus B \) is a set.
\end{definition}

\begin{proposition}\label{thm:set_difference_properties}
  Set difference\Tinyref{def:set_difference} has the following basic properties:
  \begin{thmenum}
    \DItem{thm:set_difference_properties/intersection} If \( A \) and \( B \) are subsets of \( C \), then \( A \setminus B = A \cap (C \setminus B) \).
    \DItem{thm:set_difference_properties/double_difference} If \( A \subseteq B \), then \( B \setminus (B \setminus A) = A \)
  \end{thmenum}
\end{proposition}
\begin{proof}
  \begin{description}
    \RItem{thm:set_difference_properties/intersection} Since \( a \in A \) implies \( a \in C \), we have
    \begin{align*}
      A \setminus B
      &=
      \{ a \in A \colon a \not\in B \}
      = \\ &=
      \{ a \in A \colon a \in C \text{ and } a \not\in B \}
      = \\ &=
      A \cap (C \setminus B).
    \end{align*}

    \RItem{thm:set_difference_properties/double_difference} By the law of the excluded middle,
    \begin{align*}
      B \setminus (B \setminus A)
      &=
      \{ b \in B \colon b \not\in \{ b \in B \colon b \not\in A \} \}
      = \\ &=
      \{ b \in B \colon b \in A \}
      = \\ &=
      A.
    \end{align*}
  \end{description}
\end{proof}

\begin{definition}\label{def:power_set}\cite[19]{Enderton1977}
  If \( A \) is a set, define its \Def{power set} as
  \begin{equation*}
    \Power(A) \coloneqq \{ B \colon B \subseteq A \}.
  \end{equation*}

  By~\ref{def:set_zfc/A5}, \( \Power(A) \) is a set.
\end{definition}

\begin{remark}
  We give two pairs of definitions for tuples and Cartesian products. The first pair, \cref{def:kuratowski_pair,def:binary_cartesian_product}, is quite restricted and is mostly necessary for defining functions\Tinyref{def:function} and ensuring that everything along the way is indeed a set. The second pair of definitions, given in \cref{def:cartesian_product}, can then be used freely.
\end{remark}

\begin{definition}\label{def:kuratowski_pair}\cite[36]{Enderton1977}
  If \( A \) and \( B \) are sets, define the \Def{(binary) tuple} or \Def{Kuratowski pair} as
  \begin{equation*}
    (A, B) \coloneqq \{ \{ A \}, \{ A, B \} \}.
  \end{equation*}

  By~\ref{def:set_zfc/A3}, \( (A, B) \) is a set.
\end{definition}

\begin{definition}\label{def:binary_cartesian_product}\cite[37]{Enderton1977}
  If \( A \) and \( B \) are sets, define their \Def{binary Cartesian product} as
  \begin{equation*}
    A \times B \coloneqq \{ (a, b) \colon a \in A \land b \in B \}.
  \end{equation*}
\end{definition}

\begin{proposition}\label{def:binary_cartesian_product_is_set}
  If \( A \) and \( B \) are sets, their product \( A \times B \) is also a set.
\end{proposition}
\begin{proof}
  Fix \( a \in A \) and \( b \in B \).
  \begin{itemize}
    \item \( \{ a \} \) is a set by~\ref{def:set_zfc/A6} since \( \{ a \} \subseteq A \)
    \item \( A \cup B \) is a set by \cref{def:set_union}
    \item \( \{ a, b \} \) is a set by~\ref{def:set_zfc/A6} since \( \{ a \} \subseteq A \cup B \)
    \item \( (a, b) = \{ \{ a \}, \{ a, b \} \} \) is a set by~\ref{def:set_zfc/A6} since \( (a, b) \subseteq \Power(A \cup B) \).
  \end{itemize}

  Thus \( A \times B \) is a set since \( A \times B \subseteq \Power(\Power(A \cup B)) \).
\end{proof}

\begin{definition}\label{def:cartesian_product}\cite[54]{Enderton1977}
  Let \( \{ X_i \}_{i \in I} \) be a nonempty family of nonempty sets\Tinyref{def:indexed_family}.

  We define their \Def{Cartesian product} as
  \begin{equation*}
    \prod_{i \in I} X_i \coloneqq \left\{ f: I \to \bigcup_{j \in I} X_j \colon \forall j \in I, f(j) \in X_j \right\}.
  \end{equation*}

  Any element of the Cartesian product is called a \Def{tuple}.
\end{definition}

\begin{definition}\label{def:disjoint_union}
  Let \( \{ X_i \}_{i \in I} \) be a nonempty family of nonempty sets\Tinyref{def:indexed_family}.

  We define their \Def{disjoint union} as
  \begin{equation*}
    \coprod_{i \in I} X_i \coloneqq \{ (i, x) \colon i \in I, x \in X_i \}.
  \end{equation*}
\end{definition}

\begin{definition}\label{def:successor_operator}\cite[68]{Enderton1977}
  For any set \( X \), we define the \Def{successor} operation
  \begin{equation*}
    S(X) \coloneqq X \cup \{ X \}.
  \end{equation*}
\end{definition}

\begin{definition}\label{def:inductive_set}\cite[68]{Enderton1977}
  A set \( A \) is called \Def{inductive} if
  \begin{defenum}
    \item \( \varnothing \in A \)
    \item \( a \in A \implies S(a) \in A \)
  \end{defenum}
\end{definition}

\begin{definition}\label{def:smallest_inductive_set}
  The smallest inductive set\Tinyref{def:inductive_set} is
  \begin{equation*}
    \omega \coloneqq \bigcap \{ A \colon A \text{ is an inductive set} \}.
  \end{equation*}

  The elements of \( \omega \) are
  \begin{equation*}
    \varnothing, S(\varnothing), S(S(\varnothing)),
  \end{equation*}
  where \( S \) is the set-theoretic successor operator (see \cref{def:successor_operator}).
\end{definition}

\begin{definition}\label{def:transitive_set}\cite[71]{Enderton1977}
  A set \( A \) is called \Def{transitive} if \( a \in A \) implies \( a \subseteq A \).
\end{definition}

\begin{definition}\label{def:ordinal}\cite[theorem 7L]{Enderton1977}
  A set \( A \) is called an \Def{ordinal} or an \Def{ordinal numbers} if it is well-ordered\Tinyref{def:order/partial/well_order} under set membership.
\end{definition}

\begin{theorem}\label{thm:ordinals_are_well_ordered}\cite[theorem 7M]{Enderton1977}
  The class of all ordinals\Tinyref{def:ordinal} is well-ordered\Tinyref{def:order/partial/well_order} by the inclusion relation \( \subseteq \), that is, every set of ordinals has a least element.
\end{theorem}

\begin{corollary}\label{thm:natural_numbers_are_well_ordered}
  The natural numbers\Tinyref{def:natural_numbers} are well-ordered.
\end{corollary}

\begin{definition}\label{def:category_of_sets}
  We denote by \( \Cat{Set} \) the category\Tinyref{def:category} where
  \begin{itemize}
    \item the class\Tinyref{def:set_zfc} of objects is the class of all sets\Tinyref{def:set_zfc}.
    \item the morphisms between two sets \( A, B \) are the functions \( f: A \to B \), with morphism composition being the usual function composition\Tinyref{def:function_composition}.
  \end{itemize}

  Furthermore, the category is locally small\Tinyref{def:category_cardinality}.
\end{definition}
\begin{proof}
  To see that \( \Cat{Set} \) is indeed a category, we verify the axioms
  \begin{description}
    \item [\ref{def:category/identity}] For any set \( X \in \Cat{Set} \), we have the identity function
    \begin{align*}
      &\Id_X: X \to X \\
      &\Id_X(x) \coloneqq x.
    \end{align*}

    If \( f: X \to Y \) is any function, for all \( x \in X \) we have
    \begin{align*}
      [\Id_Y \circ f](x) = \Id_Y(f(x)) = f(x),
      &&
      [f \circ \Id_X](x) = f(\Id_X(x)) = f(x),
    \end{align*}
    thus \( \Id_x \) and \( \Id_Y \) are indeed identity morphisms.

    \item [\ref{def:category/associativity}] Let \( f: A \to B \), \( g: B \to C \) and \( h: C \to D \) be arbitrary functions. For any \( x \in A \), we have
    \begin{align*}
      [[h \circ g] \circ f](x)
      =
      [h \circ g](f(x))
      =
      h(g(f(x)))
      =
      h([g \circ f](x))
      =
      [h \circ [g \circ f]](x).
    \end{align*}
  \end{description}

  Since a function \( f: X \to Y \) is formally\Tinyref{def:function} a subset of the product, \( X \times X \)\Tinyref{def:cartesian_product}, which is a set, it is itself a set.

  The class of all functions \( \Cat{Set}(X, Y) \) from \( X \) to \( Y \) is then a subset of \( \Power(X \times Y) \), which is also a set. Thus \( \Bold{Set} \) is a locally small category.
\end{proof}

\begin{corollary}\label{thm:functions_over_set_form_monoid}
  Let \( X \) be a set. Then the family \( \Cat{Set}(X) \) of all functions\Tinyref{remark:category_obj_hom} is a monoid\Tinyref{def:magma/monoid} with function composition as the operation.
\end{corollary}

\begin{proposition}\label{thm:set_categorical_limits}
  We are interested in categorical limits\Tinyref{def:categorical_limit} and colimits\Tinyref{def:categorical_colimit} in \( \Cat{Set} \). If \( \{ X_i \}_{i \in I} \) is an indexed family\Tinyref{def:indexed_family} of sets, then
  \begin{defenum}
    \DItem{thm:set_categorical_limits/product} their categorical product\Tinyref{def:categorical_product} is their Cartesian product\Tinyref{def:cartesian_product} \( \prod_{i \in I} X_i \), the projection morphisms being
    \begin{align*}
      &\pi_j: \prod_{i \in I} X_i \to X_j \\
      &\pi_j(\{ x_i \}_{i \in I}) \coloneqq x_j.
    \end{align*}

    \DItem{thm:set_categorical_limits/coproduct} their categorical coproduct\Tinyref{def:categorical_coproduct} is their disjoint union\Tinyref{def:disjoint_union} \( \coprod_{i \in I} X_i \), the injection morphisms being
    \begin{align*}
      &\iota_j: X_j \to \coprod_{i \in I} X_i \\
      &\iota_j(x_j) \coloneqq (j, x_j).
    \end{align*}

    \DItem{thm:set_categorical_limits/equalizer} An equalizer of two functions \( f, g: X \to Y \) in \( \Cat{Set} \) is the set
    \begin{equation*}
      \{ x \in X \colon f(x) = g(x) \}.
    \end{equation*}

    Compare this with pullbacks in \( \Cat{Set} \)\Tinyref{thm:set_categorical_limits/pullback}.

    \DItem{thm:set_categorical_limits/pullback} The pullback of two functions \( f: X \to Z \) and \( g: Y \to Z \) in \( \Cat{Set} \) is the set
    \begin{equation*}
      \{ (x, y) \in X \times Y \colon f(x) = g(y) \}.
    \end{equation*}

    Compare this with equalizers in \( \Cat{Set} \)\Tinyref{thm:set_categorical_limits/equalizer}.

    \DItem{thm:set_categorical_limits/coequalizer} A coequalizer of two functions \( f, g: X \to Y \) in \( \Cat{Set} \) is the quotient space formed by the reflexive, symmetric and transitive closure of the relation \( x \sim y \iff f(x) = g(x) \).

    In particular, if \( \sim \subseteq X^2 \) is an equivalence relation\Tinyref{def:order/equivalence}) on \( X \), then the coequalizer of the two projection maps of the product \( X^2 \) is the pair \( (X / ~, \pi) \), where \( \pi \) is the quotient map
    \begin{align*}
      &\pi: X \to X / ~ \\
      &\pi(x) = [x].
    \end{align*}

    \DItem{thm:set_categorical_limits/pushout} Let \( X \) and \( Y \) be two sets, let \( Z \) be a subset of \( X \) and let \( i: Z \to X \) be the inclusion map. For any function \( f: Z \to Y \), we define a pushout of \( i \) and \( f \) in \( \Cat{Set} \) to be the set obtained as the quotient of the coproduct \( X \coprod Y \) and the relation \( x \sim y \iff i^{-1}(x) = f^{-1}(y) \).
  \end{defenum}
\end{proposition}

\begin{proposition}\label{thm:set_is_monoidal}
  The category \( \Cat{Set} \) is monoidal with
  \begin{itemize}
    \item the Cartesian product\Tinyref{def:cartesian_product} acting as a monoidal product
    \item the singleton set \( \{ \varnothing \} \) acting as an identity object
    \item natural transformations
    \begin{align*}
      \alpha &\coloneqq \Id \\
      \lambda(\{ \varnothing \} \times A) &\coloneqq A \\
      \rho(A \times \{ \varnothing \}) &\coloneqq A
    \end{align*}
  \end{itemize}
\end{proposition}
\begin{proof}
  All conditions in \cref{def:monoidal_category} are trivially satisfied.
\end{proof}

\begin{definition}\label{def:pointed_set}
  A nonempty set \( A \) with a dedicated element \( x \in A \) with called a \Def{pointed set}.
\end{definition}
